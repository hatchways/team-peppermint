{"version":3,"sources":["themes/theme.js","types.js","context/user/userReducer.js","services/apiCalls/user.services.js","context/user/userContext.js","hocs/privateRoute.js","hocs/unPrivateRoute.js","assets/login-signup-bgImage.png","components/bgImage/index.js","containers/Forms/Login/index.js","containers/Forms/Register/index.js","containers/LandingPage/index.js","containers/Sidebar/style.js","containers/SidebarHeader/style.js","components/UserAvatar/avatar.png","components/UserAvatar/style.js","components/AvatarBadge/index.js","components/UserAvatar/index.js","containers/SidebarHeader/index.js","containers/SidebarInfo/style.js","containers/ChatList/style.js","components/ChatItem/style.js","context/language/languageContext.js","services/apiCalls/conversation.services.js","context/currentConversation/currentConversationReducer.js","context/currentConversation/currentConversationContext.js","components/ChatItem/index.js","context/conversations/conversationsReducer.js","context/conversations/conversationsContext.js","containers/ChatList/index.js","containers/ContactsList/style.js","components/ContactItem/style.js","context/contacts/contactsReducer.js","context/contacts/contactsContext.js","components/ContactItem/index.js","components/SearchContact/style.js","components/SearchContact/index.js","containers/ContactsList/index.js","containers/SidebarInfo/index.js","containers/Sidebar/index.js","components/MessageItem/style.js","components/MessageItem/index.js","utils/dateUtils.js","components/MessageInput/styles.js","components/EmojiButton/index.js","context/messages/helper.js","components/MessageInput/helper.js","components/MessageInput/index.js","containers/ChatView/styles.js","containers/ChatHeader/style.js","containers/ChatHeader/index.js","containers/ChatView/index.js","containers/Home/styles.js","containers/Home/index.js","App.js","serviceWorker.js","index.js"],"names":["theme","createMuiTheme","typography","fontFamily","fontSize","h1","caption","palette","primary","main","ActionTypes","SET_CONVERSATIONS","SET_MESSAGES","SET_CURRENT_CONVERSATION","PUSH_MESSAGE","SET_SOCKET","UPDATE_USER_IMAGE","SET_USER_DATA","SET_CONTACTS","FETCH_CONVERSATIONS","UPDATE_CONVERSATIONS","ADD_CONVERSATION","ADD_CONTACT","Action","type","payload","UserReducer","state","action","user","pictureURL","url","imageUrl","socket","headers","UserServices","login","Axios","method","data","register","logout","get","isAuthenticated","then","response","status","email","name","role","getUserConversations","getUserContacts","searchUsersByEmailOrName","query","addContact","contactID","UserStore","createContext","UserDispatch","initialState","isLoaded","_id","language","UserProvider","children","useReducer","dispatch","useEffect","res","catch","err","console","error","message","socketIOClient","userID","disconnect","Provider","value","useUserStore","useContext","PrivateRoute","Component","component","rest","roles","render","props","to","pathname","from","location","UnPrivateRoute","useStyles","makeStyles","imageContainer","backgroundImage","bgImage","backgroundRepeat","backgroundSize","height","width","marginRight","gradientContainer","display","justifyItems","alignItems","iconStyle","color","textStyle","fontWeight","textAlign","marginBottom","marginTop","BackgroundImage","classes","className","Login","renderRegister","userDispatch","useState","setMessage","initialValues","password","onSubmit","loginValues","values","Typography","variant","label","as","TextField","Button","onClick","Register","history","renderLogin","userState","log","confirmPassword","registerValues","push","Select","MenuItem","Link","LandingPage","isLogin","setIsLogin","Grid","container","justify","item","xs","root","flexDirection","backgroundColor","justifyContent","minHeight","leftRightSideStyle","padding","spacing","badge","top","right","logoutStyle","textDecoration","withStyles","boxShadow","background","paper","borderRadius","Badge","position","left","animation","border","content","transform","opacity","margin","avatar","isOnline","AvatarBadge","badgeContent","anchorOrigin","vertical","horizontal","UserAvatar","userPicture","undefined","includes","Avatar","alt","src","SidebarHeader","open","setOpen","anchorEl","setAnchorEl","handleClose","handleSave","files","a","Tooltip","title","placement","arrow","ButtonBase","aria-controls","aria-haspopup","event","currentTarget","style","marginLeft","MoreHoriz","Menu","id","keepMounted","Boolean","onClose","onSave","showPreviews","maxFileSize","flexGrow","overflow","tabs","borderColor","tabPanel","search","shape","minWidth","breakpoints","up","searchIcon","pointerEvents","clearIcon","debounceInput","outline","collapse","alert","maxHeight","avatarNameContainer","nameContainer","alignContent","chip","LanguageContext","getMessageTextVersion","isOriginal","targetLanguage","Object","textVersions","useLanguageContext","LanguageProvider","isOriginalLanguage","setIsOriginalLanguage","toggleOrginalLanguage","useCallback","ConversationServices","sendMessage","conversationID","fetchConversationById","CurrentConversationReducer","messages","CurrentConversationStore","CurrentConversationDispatch","conversationTitle","users","lastMessage","useCurrentConversationStore","useCurrentConversationDispatch","CurrentConversationProvider","conversation","ChatItem","index","selected","lastMessageObject","setLastMessageObject","currentConversation","currentConversationDispatch","isGroupConversation","length","otherUsers","filter","u","chatItemTitle","on","messageData","off","ListItem","button","gutterBottom","ConversationsReducer","conversations","ConversationsStore","ConversationsDispatch","useConversationsStore","ConversationsProvider","ChatList","List","map","buttonsContainer","contactButton","buttonBase","contactName","ContactsReducer","contacts","UPDATE_CONTACT_STATUS","idx","indexOf","contact","ContactsStore","ContactsDispatch","ContactsProvider","ContactItem","unknown","removeFromUknown","contactsDispatch","conversationsDispatch","stringHash","sort","join","updateContactStatus","disabled","conversationPayload","find","IconButton","newContact","newConversation","searchBar","toggleButton","toggleButtonSelected","success","SearchContact","timeout","updateContactList","updateUnknownList","isGlobal","setIsGlobal","handleSearchSubmit","searchQuery","toLowerCase","newContactList","startsWith","setFieldValue","seachTextField","placeholder","InputBase","onChange","e","text","clearTimeout","setTimeout","handleSearchChange","target","endAdornment","ContactsList","displayContacts","setDisplayContacts","unknownContacts","setUnknownContacts","removeContactFromList","prevState","newState","splice","i","Divider","TabPanel","other","hidden","aria-labelledby","Box","a11yProps","SidebarInfo","tabNumber","setTabNumber","AppBar","maxWidth","Tabs","newValue","aria-label","Tab","Sidebar","isMyMessage","messageContianer","messageBox","borderBottomRightRadius","borderTopLeftRadius","messageDetails","imageIcon","image","objectFit","MessageItem","date","sender","createdAt","ISO6391","getCode","moment","format","textField","EmojiButton","onSelect","anchorEmojisMenu","setAnchorEmojisMenu","onEmojiClick","_","emojiObject","emoji","groupNames","smileys_people","native","translateText","languageCode","axios","post","process","translations","translatedText","generateMessageVersions","currentUser","conversationUser","newVersion","unescape","MessageInput","inputValues","handleMessageSubmit","resetForm","emit","messageObject","InputProps","InputAdornment","messagesContainer","overflowY","scrollbarWidth","onOfflineStyle","ChatHeader","Switch","checked","inputProps","ChatView","bottomDivRef","useRef","getSenderData","current","scrollIntoView","behavior","ref","Home","require","config","App","ThemeProvider","CssBaseline","Container","exact","path","window","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a4b780a2.chunk.js","sourcesContent":["import { createMuiTheme } from \"@material-ui/core\";\r\n\r\nexport const theme = createMuiTheme({\r\n  typography: {\r\n    fontFamily: '\"Poppins\", sans-serif',\r\n    fontSize: 16,\r\n    h1: {\r\n      // could customize the h1 variant as well\r\n    },\r\n    caption:{\r\n      \r\n    }\r\n  },\r\n  palette: {\r\n    primary: { main: \"#3A8DFF\" },\r\n  },\r\n\r\n});\r\n","export const ActionTypes = {\r\n    SET_CONVERSATIONS: \"SET_CONVERSATIONS\",\r\n    SET_MESSAGES: 'SET_MESSAGES',\r\n    SET_CURRENT_CONVERSATION: \"SET_CURRENT_CONVERSATION\",\r\n    PUSH_MESSAGE: \"PUSH_MESSAGE\",\r\n    SET_SOCKET: \"SET_SOCKET\",\r\n    UPDATE_USER_IMAGE: \"UPDATE_USER_IMAGE\",\r\n    SET_USER_DATA: \"SET_USER_DATA\",\r\n    SET_CONTACTS: \"RESET_LISTS\",\r\n    FETCH_CONVERSATIONS: \"FETCH_CONVERSATIONS\",\r\n    UPDATE_CONVERSATIONS: \"UPDATE_CONVERSATIONS\",\r\n    ADD_CONVERSATION: \"RESET_CONVERSATIONS\",\r\n    ADD_CONTACT: \"ADD_CONTACT\",\r\n\r\n}\r\nconst Action = (type, payload) => ({ type, payload })\r\nexport default Action","import { ActionTypes } from \"types\";\r\n\r\nconst UserReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case ActionTypes.SET_USER_DATA: {\r\n      return { ...state, ...action.payload }\r\n    }\r\n    case ActionTypes.UPDATE_USER_IMAGE: {\r\n      return {\r\n        ...state,\r\n        user: {\r\n          ...state.user,\r\n          pictureURL: { url: action.payload.imageUrl }\r\n        }\r\n      };\r\n    }\r\n    case ActionTypes.SET_SOCKET: {\r\n      return {\r\n        ...state,\r\n        socket: action.payload\r\n      }\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nexport default UserReducer","import Axios from 'axios'\r\nconst headers = {\r\n    'Content-Type': 'application/json',\r\n}\r\n\r\nconst UserServices = {\r\n    login: (user) => {\r\n        return Axios('/api/user/login', {\r\n            method: 'POST',\r\n            data: user,\r\n            headers\r\n        })\r\n\r\n    },\r\n    register: user => {\r\n        return Axios('/api/user/', {\r\n            method: 'POST',\r\n            data: user,\r\n            headers\r\n        })\r\n    },\r\n    logout: () => {\r\n        return Axios.get('/api/user/logout')\r\n    },\r\n    isAuthenticated: () => {\r\n        return Axios.get('/api/user/authenticated')\r\n            .then(response => {\r\n                if (response.status !== 401)\r\n                    return response\r\n                else\r\n                    return { isAuthenticated: false, user: { email: \"\", name: \"\", role: \"\" } }\r\n            })\r\n    },\r\n    getUserConversations: () => {\r\n        return Axios.get('/api/user/conversations')\r\n    },\r\n    getUserContacts: () => {\r\n        return Axios.get('/api/user/contacts')\r\n    },\r\n    searchUsersByEmailOrName: (query) => {\r\n        return Axios.get(`/api/user?searchTerm=${query}`)\r\n    },\r\n    addContact: (contactID) => {\r\n        return Axios(`/api/user/contacts`, {\r\n            method: 'POST',\r\n            data: { contactID },\r\n            headers,\r\n        })\r\n    }\r\n\r\n}\r\nexport default UserServices","import React, { useReducer, useContext, createContext, useEffect } from \"react\";\r\nimport UserReducer from \"./userReducer\";\r\n\r\nimport UserServices from \"services/apiCalls/user.services\";\r\nimport Action, { ActionTypes } from 'types'\r\nimport socketIOClient from 'socket.io-client';\r\n\r\nconst UserStore = createContext();\r\nconst UserDispatch = createContext();\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n  isLoaded: false,\r\n  user: {\r\n    _id: \"\",\r\n    name: \"\",\r\n    email: \"\",\r\n    language: \"\",\r\n    pictureURL: { url: \"\" },\r\n\r\n  },\r\n  socket: null,\r\n}\r\nconst UserProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(UserReducer, initialState);\r\n  useEffect(() => {\r\n    UserServices.isAuthenticated()\r\n      .then(res => {\r\n        dispatch(Action(ActionTypes.SET_USER_DATA, res.data))\r\n      })\r\n      .catch(err => console.error(err.message))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (state.isAuthenticated && !state.socket) {\r\n      dispatch(Action(ActionTypes.SET_SOCKET, socketIOClient({\r\n        query: {\r\n          userID: state.user._id\r\n        }\r\n      })))\r\n    }\r\n    return () => state.socket?.disconnect\r\n  }, [state])\r\n  return (\r\n    <UserStore.Provider value={state}>\r\n      <UserDispatch.Provider value={dispatch}>\r\n        {children}\r\n      </UserDispatch.Provider>{\" \"}\r\n    </UserStore.Provider>\r\n  );\r\n}\r\n\r\nconst useUserStore = () => useContext(UserStore)\r\nconst useUserDispatch = () => useContext(UserDispatch)\r\nexport {\r\n  useUserStore,\r\n  useUserDispatch,\r\n  UserProvider,\r\n};\r\n","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { useUserStore } from 'context/user/userContext'\r\nconst PrivateRoute = ({ component: Component, roles, ...rest }) => {\r\n    const { isAuthenticated } = useUserStore()\r\n    return (\r\n        <Route {...rest} render={props => {\r\n            if (!isAuthenticated)\r\n                return <Redirect to={{ pathname: '/', state: { from: props.location } }} />\r\n            return <Component {...props} />\r\n        }} />\r\n\r\n    )\r\n}\r\nexport default PrivateRoute","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { useUserStore } from 'context/user/userContext'\r\nconst UnPrivateRoute = ({ component: Component, ...rest }) => {\r\n    const { isAuthenticated } = useUserStore()\r\n    return (\r\n        <Route {...rest} render={props => {\r\n            if (isAuthenticated)\r\n                return <Redirect to={{ pathname: '/home', state: { from: props.location } }} />\r\n            return <Component {...props} />\r\n        }} />\r\n    )\r\n}\r\nexport default UnPrivateRoute","export default __webpack_public_path__ + \"static/media/login-signup-bgImage.0c5628a9.png\";","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport bgImage from \"../../assets/login-signup-bgImage.png\";\r\nimport SmsRoundedIcon from \"@material-ui/icons/SmsRounded\";\r\nimport TranslateRoundedIcon from \"@material-ui/icons/TranslateRounded\";\r\n\r\nconst useStyles = makeStyles({\r\n  imageContainer: {\r\n    backgroundImage: `url(${bgImage})`,\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundSize: \"cover\",\r\n    height: \"100vh\",\r\n    width: \"40vw\",\r\n    marginRight: 20,\r\n  },\r\n  gradientContainer: {\r\n    backgroundImage: \"linear-gradient(#3a8cffca, #86b8ffc9)\",\r\n    height: \"100vh\",\r\n    width: \"40vw\",\r\n    display: \"grid\",\r\n    justifyItems: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  iconStyle: {\r\n    fontSize: 70,\r\n    color: \"rgba(255, 255, 255, 0.80)\",\r\n  },\r\n  textStyle: {\r\n    color: \"rgba(255, 255, 255, 0.95)\",\r\n    fontWeight: \"200\",\r\n    fontSize: 40,\r\n    width: \"70%\",\r\n    textAlign: \"center\",\r\n    marginBottom: -80,\r\n    marginTop: -80,\r\n  },\r\n  [`@media (max-width:560px)`]: {\r\n    imageContainer: {\r\n      height: \"20vh\",\r\n      width: \"100vw\",\r\n    },\r\n    gradientContainer: {\r\n      height: \"20vh\",\r\n      width: \"100vw\",\r\n    },\r\n    textStyle: {\r\n      fontSize: 25,\r\n    },\r\n  },\r\n});\r\n\r\nexport default function BackgroundImage() {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.imageContainer}>\r\n      <div className={classes.gradientContainer}>\r\n        <SmsRoundedIcon className={classes.iconStyle} />\r\n        <h3 className={classes.textStyle}>\r\n          Converse with anyone with any language\r\n        </h3>\r\n        <TranslateRoundedIcon className={classes.iconStyle} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react'\r\nimport { Button, Typography, TextField } from '@material-ui/core'\r\nimport { useUserDispatch } from 'context/user/userContext'\r\nimport UserServices from 'services/apiCalls/user.services'\r\nimport { Formik, Field, Form } from 'formik';\r\nimport Action, { ActionTypes } from 'types';\r\n\r\nconst Login = ({ renderRegister }) => {\r\n\r\n    const userDispatch = useUserDispatch()\r\n    const [message, setMessage] = useState(null)\r\n\r\n    const loginValues = {\r\n        email: '',\r\n        password: ''\r\n    }\r\n    const handleLoginSubmit = (loginValues) => {\r\n        UserServices.login(loginValues)\r\n            .then(response => {\r\n                userDispatch(Action(ActionTypes.SET_USER_DATA, response.data))\r\n            })\r\n            .catch(err => setMessage(err))\r\n    }\r\n    return (\r\n        <div>\r\n            <Formik\r\n                initialValues={loginValues}\r\n                onSubmit={handleLoginSubmit}\r\n            >\r\n                {({ values }) => (\r\n                    <Form>\r\n                        <Typography variant=\"h1\">LOGIN</Typography>\r\n                        <Field name=\"email\" type=\"email\" label=\"Email\" as={TextField} />\r\n                        <Field name=\"password\" type=\"password\" label=\"Password\" as={TextField} />\r\n                        <div>\r\n                            <Button>Forgot Password?</Button>\r\n                            <Button onClick={renderRegister}>Don't have an account yet?</Button>\r\n                        </div>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                        >\r\n                            <Typography variant=\"h3\">\r\n                                Login\r\n                            </Typography>\r\n                        </Button>\r\n\r\n                    </Form>\r\n                )}\r\n\r\n            </Formik>\r\n            {message && <div> {message}</div>}\r\n        </div>\r\n    )\r\n}\r\nexport default Login","import React, { useEffect, useState } from 'react'\r\nimport { Link, Button, Typography, TextField, MenuItem, Select } from '@material-ui/core'\r\nimport { useUserStore } from 'context/user/userContext'\r\nimport UserServices from 'services/apiCalls/user.services'\r\nimport { Formik, Field, Form } from 'formik';\r\n\r\nconst Register = ({ history, renderLogin }) => {\r\n\r\n    const userState = useUserStore()\r\n    const [message, setMessage] = useState(null)\r\n\r\n    const registerValues = {\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        name: '',\r\n        language: 'english'\r\n    }\r\n    const handleLoginSubmit = (registerValues) => {\r\n        UserServices.register(registerValues)\r\n            .then(response => {\r\n                console.log(response)\r\n                if (response.status !== 'error')\r\n                    history.push('/home')\r\n                else\r\n                    setMessage(response.message)\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n    useEffect(() => { console.log(userState) }, [userState])\r\n    return (\r\n        <div>\r\n            <Formik\r\n                initialValues={registerValues}\r\n                onSubmit={handleLoginSubmit}\r\n            >\r\n                {({ values }) => (\r\n                    <Form>\r\n                        <Typography variant=\"h1\">REGISTRATION</Typography>\r\n                        <Field name=\"email\" type=\"email\" label=\"Email\" as={TextField} />\r\n                        <Field name=\"name\" type=\"text\" label=\"Name\" as={TextField} />\r\n                        <Field name=\"password\" type=\"password\" label=\"Password\" as={TextField} />\r\n                        <Field name=\"confirmPassword\" type=\"password\" label=\"Confirm Password\" as={TextField} />\r\n                        <Field name=\"language\" as={Select} >\r\n                            <MenuItem value=\"english\">English</MenuItem>\r\n                            <MenuItem value=\"french\">French</MenuItem>\r\n                            <MenuItem value=\"chinese\">Chinese</MenuItem>\r\n                            <MenuItem value=\"russian\">Russian</MenuItem>\r\n                        </Field>\r\n                        <div >\r\n                            <Link >Forgot Password?</Link>\r\n                            <Link onClick={renderLogin}>Don't have an account yet?</Link>\r\n                        </div>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                        >\r\n                            <Typography variant=\"h3\">\r\n                                Register\r\n                            </Typography>\r\n                        </Button>\r\n\r\n                    </Form>\r\n                )}\r\n\r\n            </Formik>\r\n            {message && <div> {message}</div>}\r\n        </div>\r\n    )\r\n}\r\nexport default Register","import React, { useState } from 'react'\r\nimport { Grid } from '@material-ui/core'\r\nimport BackgroundImage from '../../components/bgImage'\r\nimport Login from 'containers/Forms/Login'\r\nimport Register from 'containers/Forms/Register'\r\nconst LandingPage = ({ history }) => {\r\n    const [isLogin, setIsLogin] = useState(true)\r\n    const renderLogin = () => setIsLogin(true)\r\n    const renderRegister = () => setIsLogin(false)\r\n    return (\r\n        <Grid container  justify='space-between'>\r\n            <Grid item xs={6}>\r\n                <BackgroundImage />\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n                {isLogin ?\r\n                    <Login history={history} renderRegister={renderRegister} /> :\r\n                    <Register history={history} renderLogin={renderLogin} />\r\n                }\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\nexport default LandingPage","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    width: \"35%\",\r\n    height: \"100%\",\r\n    backgroundColor: \"#f5f7fb\",\r\n  },\r\n}));\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    minHeight: \"10vh\",\r\n    backgroundColor: \"transparent\",\r\n  },\r\n  leftRightSideStyle: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: theme.spacing(2),\r\n  },\r\n  badge: { top: 63, right: 5 },\r\n  typography: {\r\n    fontWeight: 600,\r\n    textAlign: \"center\",\r\n  },\r\n  logoutStyle: {\r\n    color: \"black\",\r\n    textDecoration: \"none\",\r\n  },\r\n  [`@media (max-width:400px)`]: {\r\n    root: {\r\n      padding: theme.spacing(2),\r\n    },\r\n    leftRightSideStyle: {\r\n      flexDirection: \"column\",\r\n      height: \"10vh\",\r\n      padding: 0,\r\n    },\r\n    typography: {\r\n      fontSize: \"1.3rem\",\r\n    },\r\n  },\r\n}));\r\n","export default __webpack_public_path__ + \"static/media/avatar.c2a95cb3.png\";","import Badge from \"@material-ui/core/Badge\";\r\nimport { makeStyles, withStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const OfflineBadge = withStyles((theme) => ({\r\n  badge: {\r\n    backgroundColor: \"#D3D3D3\",\r\n    color: \"#44b700\",\r\n    boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n    width: theme.spacing(1.4),\r\n    height: theme.spacing(1.4),\r\n    borderRadius: \"50%\",\r\n    top: theme.spacing(5),\r\n    right: theme.spacing(0.5),\r\n  },\r\n}))(Badge);\r\n\r\nexport const OnlineBadge = withStyles((theme) => ({\r\n  badge: {\r\n    backgroundColor: \"#44b700\",\r\n    color: \"#44b700\",\r\n    boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n    width: theme.spacing(1.1),\r\n    height: theme.spacing(1.1),\r\n    borderRadius: \"50%\",\r\n    top: theme.spacing(5),\r\n    right: theme.spacing(0.5),\r\n    \"&::after\": {\r\n      position: \"absolute\",\r\n      top: 0,\r\n      left: 0,\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      borderRadius: \"50%\",\r\n      animation: \"$ripple 1.2s infinite ease-in-out\",\r\n      border: \"1px solid currentColor\",\r\n      content: '\"\"',\r\n    },\r\n  },\r\n  \"@keyframes ripple\": {\r\n    \"0%\": {\r\n      transform: \"scale(.8)\",\r\n      opacity: 1,\r\n    },\r\n    \"100%\": {\r\n      transform: \"scale(2.4)\",\r\n      opacity: 0,\r\n    },\r\n  },\r\n}))(Badge);\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: theme.spacing(1),\r\n      marginRight: theme.spacing(3),\r\n    },\r\n  },\r\n  avatar: {\r\n    width: theme.spacing(6.5),\r\n    height: theme.spacing(6.5),\r\n  },\r\n  [`@media (max-width:400px)`]: {\r\n    root: {\r\n      \"& > *\": {\r\n        marginRight: theme.spacing(1),\r\n      },\r\n      // marginTop: 50,\r\n    },\r\n  },\r\n}));\r\n","import { Badge, makeStyles } from '@material-ui/core'\r\nimport React from 'react'\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n    badge: ({ isOnline }) => ({\r\n        backgroundColor: isOnline ? \"#44b700\" : \"#D3D3D3\",\r\n        boxShadow: '0 0 0 2px #FFF',\r\n        height: theme.spacing(1.2),\r\n        width: theme.spacing(1.2),\r\n        borderRadius: '50%',\r\n        marginBottom: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n    }),\r\n\r\n}))\r\n\r\nconst AvatarBadge = ({ children, isOnline }) => {\r\n    const classes = useStyles({ isOnline })\r\n    return (\r\n        <Badge\r\n            classes={{\r\n                badge: classes.badge\r\n            }}\r\n            badgeContent=''\r\n            variant='dot'\r\n            anchorOrigin={{\r\n                vertical: 'bottom',\r\n                horizontal: 'right'\r\n            }}\r\n        >\r\n            { children}\r\n        </Badge >\r\n    )\r\n}\r\nexport default AvatarBadge","import React from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport avatar from \"./avatar.png\";\r\nimport { useStyles } from \"./style\";\r\nimport AvatarBadge from \"components/AvatarBadge\";\r\nconst UserAvatar = ({ imageUrl, isOnline }) => {\r\n  const classes = useStyles({ isOnline });\r\n  let userPicture = \"\";\r\n\r\n  if (\r\n    imageUrl !== undefined &&\r\n    imageUrl.url !== undefined &&\r\n    imageUrl.url.includes(\"http\")\r\n  ) {\r\n    userPicture = imageUrl.url;\r\n  } else {\r\n    userPicture = avatar;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AvatarBadge isOnline={isOnline}>\r\n        <Avatar\r\n          variant=\"circular\"\r\n          alt=\"Badge\"\r\n          src={userPicture}\r\n          className={classes.avatar}\r\n        />\r\n      </AvatarBadge>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserAvatar;\r\n\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Typography,\r\n  ButtonBase,\r\n  Menu,\r\n  MenuItem,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport { useStyles } from \"./style\";\r\nimport { DropzoneDialog } from \"material-ui-dropzone\";\r\nimport { MoreHoriz } from \"@material-ui/icons\";\r\nimport UserAvatar from \"../../components/UserAvatar/index\";\r\nimport {\r\n  useUserStore,\r\n} from \"../../context/user/userContext\";\r\nimport UserServices from \"services/apiCalls/user.services\";\r\n\r\n\r\n\r\n\r\nconst SidebarHeader = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const { user } = useUserStore()\r\n  const classes = useStyles();\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  const handleSave = async (files) => {\r\n\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    UserServices.logout()\r\n      .then(response => console.log(response))\r\n      .catch(err => console.error(err))\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.leftRightSideStyle}>\r\n        <UserAvatar imageUrl={user.pictureURL} />\r\n        <Typography variant=\"body2\" className={classes.typography}>\r\n          {user.name}\r\n        </Typography>\r\n      </div>\r\n      <div className={classes.leftRightSideStyle}>\r\n        <Tooltip title=\"More actions\" placement=\"bottom\" arrow>\r\n          <ButtonBase\r\n            aria-controls=\"simple-menu\"\r\n            aria-haspopup=\"true\"\r\n            onClick={handleClick}\r\n            style={{ marginLeft: 20 }}\r\n          >\r\n            <MoreHoriz />\r\n          </ButtonBase>\r\n        </Tooltip>\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}\r\n        >\r\n          <MenuItem onClick={() => setOpen(true)}>Replace picture</MenuItem>\r\n          <MenuItem onClick={handleLogout}>\r\n            Log out\r\n          </MenuItem>\r\n        </Menu>\r\n        <DropzoneDialog\r\n          open={open}\r\n          onSave={handleSave}\r\n          showPreviews={true}\r\n          maxFileSize={2000000}\r\n          onClose={() => {\r\n            setOpen(false);\r\n            handleClose();\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default SidebarHeader;\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    backgroundColor: \"transparent\",\r\n    overflow: \"hidden\",\r\n  },\r\n  tabs: {\r\n    backgroundColor: \"#f5f7fb\",\r\n    borderColor: \"none\",\r\n  },\r\n  tabPanel: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  },\r\n  search: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: \"#e9eef9\",\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n    minWidth: \"100%\",\r\n    height: theme.spacing(7),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: \"auto\",\r\n    },\r\n  },\r\n  searchIcon: {\r\n    padding: theme.spacing(0, 2),\r\n    height: \"100%\",\r\n    pointerEvents: \"none\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  clearIcon: {\r\n    padding: theme.spacing(0, 2),\r\n    height: \"100%\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  debounceInput: {\r\n    border: \"none\",\r\n    height: \"100%\",\r\n    width: \"70%\",\r\n    backgroundColor: \"transparent\",\r\n    fontSize: \"1.3rem\",\r\n    right: 0,\r\n    outline: \"none\",\r\n  },\r\n  collapse: {\r\n    textAlign: \"center\",\r\n    marginBottom: theme.spacing(1),\r\n    width: \"100%\",\r\n  },\r\n  alert: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  [`@media (max-width:400px)`]: {\r\n    tabs: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n    },\r\n  },\r\n}));\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: 0,\r\n    maxHeight: \"65vh\",\r\n    flexGrow: 1,\r\n    overflow: \"auto\",\r\n    backgroundColor: \"transparent\",\r\n    \"-ms-overflow-style\": \"none\",\r\n    \"scrollbar-width\": \"none\",\r\n    \"&::-webkit-scrollbar\": {\r\n      display: \"none\",\r\n    },\r\n  },\r\n}));\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    // justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    padding: theme.spacing(2),\r\n    marginBottom: theme.spacing(1),\r\n    width: \"100%\",\r\n    backgroundColor: \"#f9fafc\",\r\n    boxShadow: \"0 0 1px 0 grey\",\r\n  },\r\n  avatarNameContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    width: \"75%\",\r\n    height: \"100%\",\r\n  },\r\n  nameContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignContent: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  chip: {\r\n    display: \"block\",\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  [`@media (max-width:360px)`]: {\r\n    avatarNameContainer: {\r\n      flexDirection: \"column\",\r\n      justifyContent:'center'\r\n    },\r\n  },\r\n}));\r\n","import React, { createContext, useCallback, useContext, useState } from 'react'\r\nconst LanguageContext = createContext()\r\n\r\nexport const getMessageTextVersion = (message, isOriginal, targetLanguage) => {\r\n    if (!message) return ''\r\n    if (isOriginal)\r\n        return Object.values(message.textVersions)[0]\r\n    else\r\n        return message.textVersions[targetLanguage] || Object.values(message.textVersions)[0]\r\n}\r\nconst LanguageProvider = ({ children }) => {\r\n    const [isOriginalLanguage, setIsOriginalLanguage] = useState(false)\r\n    const toggleOrginalLanguage = useCallback(() => {\r\n        setIsOriginalLanguage(!isOriginalLanguage)\r\n    }, [isOriginalLanguage])\r\n    return (\r\n        <LanguageContext.Provider value={{ isOriginalLanguage, toggleOrginalLanguage }}>\r\n            {children}\r\n        </LanguageContext.Provider>\r\n    )\r\n}\r\nexport const useLanguageContext = () => useContext(LanguageContext)\r\nexport default LanguageProvider","import Axios from 'axios'\r\nconst headers = {\r\n    'Content-Type': 'application/json',\r\n}\r\n\r\nconst ConversationServices = {\r\n    sendMessage: (conversationID, message) => {\r\n        return Axios(`/api/conversations/${conversationID}/message`, {\r\n            method: 'POST',\r\n            data: message,\r\n            headers,\r\n        })\r\n    },\r\n    fetchConversationById: (conversationID) => {\r\n        return Axios.get(`/api/conversations/${conversationID}`)\r\n    }\r\n}\r\nexport default ConversationServices","import { ActionTypes } from \"types\";\r\n\r\nconst CurrentConversationReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.SET_CURRENT_CONVERSATION: {\r\n            return { ...state, ...action.payload }\r\n        }\r\n        case ActionTypes.SET_MESSAGES: {\r\n            return { ...state, messages: action.payload }\r\n        }\r\n        case ActionTypes.PUSH_MESSAGE: {\r\n            return { ...state, messages: [...state.messages, action.payload] }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport default CurrentConversationReducer","import React, { createContext, useContext, useEffect, useReducer } from 'react'\r\nimport ConversationServices from 'services/apiCalls/conversation.services'\r\nimport Action, { ActionTypes } from 'types'\r\nimport CurrentConversationReducer from './currentConversationReducer'\r\nconst CurrentConversationStore = createContext()\r\nconst CurrentConversationDispatch = createContext()\r\nconst initialState = {\r\n    _id: '',\r\n    conversationID: '',\r\n    conversationTitle: '',\r\n    users: '',\r\n    messages: [],\r\n    lastMessage: ''\r\n}\r\nconst CurrentConversationProvider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(CurrentConversationReducer, initialState)\r\n\r\n\r\n    useEffect(() => {\r\n        if (state._id !== '')\r\n            ConversationServices.fetchConversationById(state._id)\r\n                .then((response) => {\r\n                    dispatch(Action(ActionTypes.SET_MESSAGES, response.data.conversation.messages));\r\n                })\r\n                .catch((err) => console.log(err))\r\n    }, [state._id])\r\n    return (\r\n        <CurrentConversationStore.Provider value={state}>\r\n            <CurrentConversationDispatch.Provider value={dispatch}>\r\n                {children}\r\n            </CurrentConversationDispatch.Provider>\r\n        </CurrentConversationStore.Provider >\r\n    )\r\n}\r\nexport const useCurrentConversationStore = () => useContext(CurrentConversationStore)\r\nexport const useCurrentConversationDispatch = () => useContext(CurrentConversationDispatch)\r\nexport default CurrentConversationProvider","import React, { useState, useEffect } from \"react\";\r\nimport { useStyles } from \"./style\";\r\nimport UserAvatar from \"../UserAvatar\";\r\nimport { Typography, ListItem } from \"@material-ui/core\";\r\nimport { useUserStore } from \"../../context/user/userContext\";\r\nimport { useLanguageContext, getMessageTextVersion } from \"context/language/languageContext\";\r\nimport { useCurrentConversationDispatch, useCurrentConversationStore } from \"context/currentConversation/currentConversationContext\";\r\nimport Action, { ActionTypes } from \"types\";\r\n\r\n\r\nconst ChatItem = ({ conversation, index, selected }) => {\r\n  const classes = useStyles()\r\n  const { user, socket } = useUserStore()\r\n  const { _id, users, conversationTitle, lastMessage } = conversation\r\n  const { isOriginalLanguage } = useLanguageContext()\r\n  const [lastMessageObject, setLastMessageObject] = useState(lastMessage)\r\n  const currentConversation = useCurrentConversationStore()\r\n  const currentConversationDispatch = useCurrentConversationDispatch()\r\n  const isGroupConversation = users.length > 2\r\n  const otherUsers = users.filter(u => u._id !== user._id)\r\n  const chatItemTitle = isGroupConversation ? conversationTitle || 'Group Chat' : otherUsers[0].name\r\n\r\n\r\n  const onChatClick = () => {\r\n    currentConversationDispatch(Action(ActionTypes.SET_CURRENT_CONVERSATION, conversation));\r\n  };\r\n  useEffect(() => {\r\n    socket.on(`${conversation._id}-message`, messageData => {\r\n      setLastMessageObject(messageData)\r\n      if (currentConversation._id === _id)\r\n        currentConversationDispatch(Action(ActionTypes.PUSH_MESSAGE, messageData))\r\n    })\r\n    return () => socket.off(`${conversation._id}-message`)\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n  return (\r\n    <ListItem\r\n      button\r\n      className={classes.root}\r\n      onClick={onChatClick}\r\n      selected={currentConversation?._id === _id}\r\n    >\r\n      <div className={classes.avatarNameContainer}>\r\n        {users.length === 1 && (\r\n          <UserAvatar\r\n            imageUrl={\"\"}\r\n          />\r\n        )}\r\n        <div className={classes.nameContainer}>\r\n          <Typography\r\n            variant=\"body1\"\r\n            gutterBottom\r\n          >\r\n            {chatItemTitle}\r\n          </Typography>\r\n          <Typography\r\n            variant=\"body2\"\r\n            gutterBottom\r\n          >\r\n            {getMessageTextVersion(lastMessageObject, isOriginalLanguage, user.language)}\r\n          </Typography>\r\n        </div>\r\n      </div>\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nexport default ChatItem\r\n\r\n","import { ActionTypes } from \"types\";\r\n\r\nconst ConversationsReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.SET_CONVERSATIONS: {\r\n            return { ...state, conversations: action.payload }\r\n        }\r\n        case ActionTypes.ADD_CONVERSATION: {\r\n            return {...state, conversations: action.payload}\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport default ConversationsReducer","import React, { useReducer, useContext, createContext, useEffect } from \"react\";\r\nimport ConversationsReducer from \"./conversationsReducer\";\r\n\r\nimport UserServices from \"services/apiCalls/user.services\";\r\nimport Action, { ActionTypes } from 'types'\r\nimport { useUserStore } from \"context/user/userContext\";\r\n\r\nexport const ConversationsStore = createContext();\r\nexport const ConversationsDispatch = createContext();\r\n\r\nconst initialState = {\r\n    conversations: []\r\n}\r\nconst ConversationsProvider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(ConversationsReducer, initialState);\r\n    const { isAuthenticated } = useUserStore()\r\n    useEffect(() => {\r\n        if (isAuthenticated)\r\n            UserServices.getUserConversations()\r\n                .then(response => {\r\n                    dispatch(Action(ActionTypes.SET_CONVERSATIONS, response.data.conversations))\r\n                })\r\n                .catch(err => console.log(err))\r\n    }, [isAuthenticated])\r\n    return (\r\n        <ConversationsStore.Provider value={state}>\r\n            <ConversationsDispatch.Provider value={dispatch}>\r\n                {children}\r\n            </ConversationsDispatch.Provider>\r\n        </ConversationsStore.Provider>\r\n    );\r\n}\r\n\r\nexport const useConversationsStore = () => useContext(ConversationsStore)\r\nexport const useConversationsDispatch = () => useContext(ConversationsDispatch)\r\nexport default ConversationsProvider\r\n","import React from \"react\";\r\nimport { useStyles } from \"./style\";\r\nimport ChatItem from \"../../components/ChatItem\";\r\nimport Typography from \"@material-ui/core/Typography\"\r\nimport List from \"@material-ui/core/List\";\r\nimport { useConversationsStore } from \"context/conversations/conversationsContext\";\r\n\r\nconst ChatList = () => {\r\n  const classes = useStyles();\r\n  const { conversations } = useConversationsStore()\r\n\r\n  return (\r\n    <List className={classes.root}>\r\n      {conversations.length > 0 ?\r\n        conversations.map((conversation, index) => {\r\n          return (\r\n            <ChatItem\r\n              key={index}\r\n              conversation={conversation}\r\n              index={index}\r\n\r\n            />\r\n          )\r\n        }) :\r\n        <Typography\r\n          variant=\"body1\"\r\n          color=\"primary\"\r\n          gutterBottom\r\n          style={{ color: \"black\", textAlign: \"center\" }}\r\n        >\r\n          No group chats\r\n      </Typography>}\r\n    </List>\r\n  );\r\n};\r\n\r\nexport default ChatList;\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles(theme => ({\r\n  root: {\r\n    padding: 0,\r\n  },\r\n  buttonsContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'column'\r\n  }\r\n\r\n}))\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: 'center',\r\n    width: '100%'\r\n  },\r\n  contactButton: {\r\n    width: '100%',\r\n    justifyContent: 'start',\r\n    '&:focus': {\r\n      outline: 'none'\r\n    }\r\n  },\r\n  avatarNameContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    width: \"50%\",\r\n    height: \"100%\",\r\n  },\r\n  chip: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  buttonBase: {\r\n    marginLeft: 20,\r\n    marginRight: 20,\r\n    padding: 10,\r\n    borderRadius: \"50%\",\r\n  },\r\n  contactName: {\r\n    marginBottom: 0,\r\n    fontWeight: 600,\r\n  },\r\n  [`@media (max-width:400px)`]: {\r\n    avatarNameContainer: {\r\n      flexDirection: \"column\",\r\n      justifyContent: \"center\",\r\n    },\r\n    contactName: {\r\n      fontSize: \"1.3rem\",\r\n    },\r\n  },\r\n}));\r\n","import { ActionTypes } from \"types\";\r\n\r\nconst ContactsReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.SET_CONTACTS: {\r\n            return { ...state, contacts: action.payload }\r\n        }\r\n        case ActionTypes.ADD_CONTACT: {\r\n            return { ...state, contacts: [...state.contacts, action.payload] }\r\n        }\r\n        case ActionTypes.UPDATE_CONTACT_STATUS: {\r\n            let idx = state.contacts.indexOf(action.payload.contact)\r\n            state.contacts[idx].isOnline = action.payload.status\r\n\r\n            return { ...state }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport default ContactsReducer","import React, { useReducer, useContext, createContext, useEffect } from \"react\";\r\nimport ContactsReducer from \"./contactsReducer\";\r\n\r\nimport UserServices from \"services/apiCalls/user.services\";\r\nimport Action, { ActionTypes } from 'types'\r\nimport { useUserStore } from \"context/user/userContext\";\r\n\r\nexport const ContactsStore = createContext();\r\nexport const ContactsDispatch = createContext();\r\n\r\nconst initialState = {\r\n    contacts: []\r\n}\r\nconst ContactsProvider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(ContactsReducer, initialState);\r\n    const { isAuthenticated } = useUserStore()\r\n    useEffect(() => {\r\n        if (isAuthenticated)\r\n            UserServices.getUserContacts()\r\n                .then(response => dispatch(Action(ActionTypes.SET_CONTACTS, response.data.contacts)))\r\n                .catch(err => console.error(err))\r\n\r\n    }, [isAuthenticated])\r\n    return (\r\n        <ContactsStore.Provider value={state}>\r\n            <ContactsDispatch.Provider value={dispatch}>\r\n                {children}\r\n            </ContactsDispatch.Provider>\r\n        </ContactsStore.Provider>\r\n    );\r\n}\r\n\r\nexport const useContactsStore = () => useContext(ContactsStore)\r\nexport const useContactsDispatch = () => useContext(ContactsDispatch)\r\nexport default ContactsProvider\r\n","import React, { useEffect } from \"react\";\r\nimport { useStyles } from \"./style\";\r\nimport UserAvatar from \"../UserAvatar\";\r\nimport stringHash from 'string-hash'\r\nimport {\r\n  Typography,\r\n  ListItem,\r\n  ButtonBase,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport AddCircleRoundedIcon from '@material-ui/icons/AddCircleRounded';\r\nimport { useUserStore } from \"context/user/userContext\";\r\nimport { useConversationsDispatch, useConversationsStore } from \"context/conversations/conversationsContext\";\r\nimport { useCurrentConversationDispatch, useCurrentConversationStore } from \"context/currentConversation/currentConversationContext\";\r\nimport Action, { ActionTypes } from \"types\";\r\nimport UserServices from \"services/apiCalls/user.services\";\r\nimport { useContactsDispatch } from \"context/contacts/contactsContext\";\r\nconst ContactItem = ({ contact, unknown, removeFromUknown }) => {\r\n  const classes = useStyles()\r\n  const { conversations } = useConversationsStore()\r\n  const { user, socket } = useUserStore()\r\n  const { name, isOnline } = contact\r\n  const contactsDispatch = useContactsDispatch()\r\n  const conversationsDispatch = useConversationsDispatch()\r\n  const currentConversation = useCurrentConversationStore()\r\n  const currentConversationDispatch = useCurrentConversationDispatch()\r\n  const conversationID = stringHash([user._id, contact._id].sort().join())\r\n\r\n  const handleContactItemClick = () => {\r\n    const conversationPayload = conversations.find(conversation =>\r\n      conversation.conversationID === conversationID &&\r\n      conversation.conversationTitle === null)\r\n    currentConversationDispatch(Action(ActionTypes.SET_CURRENT_CONVERSATION, conversationPayload))\r\n  }\r\n  const handleAddIconClick = () => {\r\n    UserServices.addContact(contact._id)\r\n      .then(response => {\r\n        contactsDispatch(Action(ActionTypes.ADD_CONTACT, response.data.newContact))\r\n        if (response.data.newConversation)\r\n          conversationsDispatch(Action(ActionTypes.ADD_CONVERSATION, response.data.newConversation))\r\n        removeFromUknown(contact)\r\n      })\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  useEffect(() => {\r\n    const updateContactStatus = (status) => {\r\n      contactsDispatch(Action(ActionTypes.UPDATE_CONTACT_STATUS, { contact, status }))\r\n    }\r\n    socket.on(`${contact._id}-login`, ({ isOnline }) => { if (!unknown) updateContactStatus(isOnline) })\r\n    socket.on(`${contact._id}-logout`, ({ isOnline }) => { if (!unknown) updateContactStatus(isOnline) })\r\n    return () => {\r\n      socket.off(`${contact._id}-login`)\r\n      socket.off(`${contact._id}-logout `)\r\n    }\r\n  }, [socket, unknown, contact, contactsDispatch])\r\n  return (\r\n    <ListItem\r\n      className={classes.root}\r\n      selected={currentConversation.conversationID === conversationID && currentConversation.conversationTitle === null}\r\n    >\r\n      <ButtonBase className={classes.contactButton} disabled={unknown} onClick={handleContactItemClick}>\r\n        <UserAvatar isOnline={isOnline} />\r\n        <Typography variant='h6'>{name}</Typography>\r\n      </ButtonBase>\r\n      {unknown &&\r\n        <IconButton onClick={handleAddIconClick}>\r\n          <AddCircleRoundedIcon color='primary' />\r\n        </IconButton>\r\n      }\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nexport default ContactItem\r\n\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    width: '90%',\r\n    margin: 'auto',\r\n    padding: theme.spacing(1, 2),\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between'\r\n  },\r\n  searchBar: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n  },\r\n  toggleButton: {\r\n    height: '90%',\r\n    padding: theme.spacing(0, 1),\r\n    margin: 'auto'\r\n  },\r\n  toggleButtonSelected: {\r\n    color: theme.palette.success.main\r\n  }\r\n}));\r\n","import React, { useState } from 'react'\r\nimport { IconButton, InputBase, } from '@material-ui/core'\r\nimport SearchIcon from '@material-ui/icons/Search'\r\nimport PublicIcon from '@material-ui/icons/Public';\r\nimport { useStyles } from './style'\r\nimport { Formik, Field, Form } from 'formik'\r\nimport UserServices from 'services/apiCalls/user.services';\r\nconst SearchContact = ({ contacts, updateContactList, updateUnknownList }) => {\r\n    const classes = useStyles()\r\n    const searchValues = { searchQuery: '' }\r\n    const [isGlobal, setIsGlobal] = useState(true)\r\n    let timeout\r\n    const handleSearchSubmit = (searchQuery) => {\r\n\r\n        if (isGlobal) {\r\n            UserServices.searchUsersByEmailOrName(searchQuery.toLowerCase())\r\n                .then((response) => updateUnknownList(response.data.users))\r\n                .catch(err => console.log(err))\r\n        }\r\n\r\n        else {\r\n            let newContactList = contacts.filter(contact =>\r\n                contact.name.toLowerCase().startsWith(searchQuery.toLowerCase()) ||\r\n                contact.email.toLowerCase().startsWith(searchQuery.toLowerCase())\r\n            )\r\n            updateContactList(newContactList)\r\n        }\r\n    }\r\n    const handleSearchChange = (text, setFieldValue) => {\r\n        setFieldValue('searchQuery', text)\r\n        if (timeout) clearTimeout(timeout)\r\n        if (text.length >= 3)\r\n            timeout = setTimeout(() => handleSearchSubmit(text), 700)\r\n        if (text === '') {\r\n            updateContactList(contacts)\r\n            updateUnknownList([])\r\n        }\r\n    }\r\n    return (\r\n        <div className={classes.root}>\r\n\r\n            <IconButton onClick={() => setIsGlobal(!isGlobal)}>\r\n                <PublicIcon color={isGlobal ? 'primary' : 'disabled'} />\r\n            </IconButton>\r\n\r\n            <Formik\r\n                initialValues={searchValues}\r\n                onSubmit={handleSearchSubmit}\r\n            >\r\n                {({ values, setFieldValue }) => (\r\n                    <Form className={classes.searchBar}>\r\n                        <Field\r\n                            className={classes.seachTextField}\r\n                            name='searchQuery'\r\n                            type='text'\r\n                            placeholder='Search Contact'\r\n                            as={InputBase}\r\n                            onChange={(e) => handleSearchChange(e.target.value, setFieldValue, values)}\r\n                            endAdornment={<SearchIcon color='disabled' />}\r\n                        />\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n\r\n\r\n        </div >\r\n    )\r\n}\r\nexport default SearchContact","import React, { useEffect, useState } from \"react\";\r\nimport { useStyles } from \"./style\";\r\nimport { Divider } from \"@material-ui/core\";\r\nimport ContactItem from \"../../components/ContactItem\";\r\nimport { useContactsStore } from 'context/contacts/contactsContext'\r\nimport SearchContact from \"components/SearchContact\";\r\n\r\n\r\n\r\nconst ContactsList = () => {\r\n  const classes = useStyles()\r\n  const { contacts } = useContactsStore()\r\n  const [displayContacts, setDisplayContacts] = useState(contacts)\r\n  const [unknownContacts, setUnknownContacts] = useState([])\r\n  const removeContactFromList = (contact) => {\r\n    setUnknownContacts(prevState => {\r\n      let newState= prevState\r\n      newState.splice(prevState.indexOf(contact))\r\n      return newState\r\n    })\r\n  }\r\n  useEffect(() => {\r\n    console.log(unknownContacts)\r\n  }, [unknownContacts])\r\n  useEffect(() => {\r\n    setDisplayContacts(contacts)\r\n  }, [contacts])\r\n  return (\r\n    <div className={classes.root} >\r\n      <SearchContact contacts={contacts} updateContactList={setDisplayContacts} updateUnknownList={setUnknownContacts} />\r\n      {unknownContacts.map((contact, i) =>\r\n        <ContactItem key={i} contact={contact} unknown removeFromUknown={removeContactFromList} />\r\n      )}\r\n      <Divider variant='middle' />\r\n      {displayContacts.map((contact, i) =>\r\n        <ContactItem key={i} contact={contact} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContactsList;\r\n","import React, { useState } from \"react\";\r\nimport { useStyles } from \"./style\";\r\nimport {\r\n  AppBar,\r\n  Tabs,\r\n  Tab,\r\n  Box,\r\n} from \"@material-ui/core\";\r\nimport ChatList from \"../ChatList\";\r\nimport ContactsList from \"containers/ContactsList\";\r\n\r\n\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box>{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `simple-tab-${index}`,\r\n    \"aria-controls\": `simple-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst SidebarInfo = () => {\r\n  const classes = useStyles();\r\n  const [tabNumber, setTabNumber] = useState(0);\r\n  const handleChange = (event, newValue) => {\r\n    setTabNumber(newValue);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar\r\n        position=\"static\"\r\n        style={{\r\n          color: \"black\",\r\n          maxWidth: \"100%\",\r\n          backgroundColor: \"#f5f7fb\",\r\n          boxShadow: \"none\",\r\n        }}\r\n      >\r\n        <Tabs\r\n          value={tabNumber}\r\n          onChange={handleChange}\r\n          aria-label=\"simple tabs example\"\r\n          variant=\"fullWidth\"\r\n        >\r\n          <Tab\r\n            label=\"Chats\"\r\n            {...a11yProps(0)}\r\n            style={{\r\n              minWidth: \"50%\",\r\n              outline: \"none\",\r\n            }}\r\n          />\r\n          <Tab\r\n            label=\"Contacts\"\r\n            {...a11yProps(1)}\r\n            style={{ minWidth: \"50%\", outline: \"none\" }}\r\n          />\r\n\r\n        </Tabs>\r\n      </AppBar>\r\n\r\n      <TabPanel value={tabNumber} index={0} className={classes.tabPanel}>\r\n        <ChatList />\r\n      </TabPanel>\r\n      <TabPanel value={tabNumber} index={1} className={classes.tabPanel}>\r\n        <ContactsList />\r\n      </TabPanel>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SidebarInfo;\r\n","import React from \"react\";\r\nimport { useStyles } from \"./style\";\r\nimport SidebarHeader from \"../SidebarHeader\";\r\nimport SidebarInfo from \"../SidebarInfo\";\r\n\r\nconst Sidebar = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SidebarHeader />\r\n      <SidebarInfo />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    padding: theme.spacing(2),\r\n    display: 'flex',\r\n    justifyContent: ({ isMyMessage }) => isMyMessage ? 'flex-end' : 'flex-start'\r\n  },\r\n  messageContianer: {\r\n    minWidth: '12ch',\r\n  },\r\n  messageBox: {\r\n    width: '100%',\r\n    display: 'flex',\r\n    padding: 10,\r\n    borderRadius: 10,\r\n    borderBottomRightRadius: ({ isMyMessage }) => isMyMessage && 0,\r\n    borderTopLeftRadius: ({ isMyMessage }) => !isMyMessage && 0,\r\n    color: ({ isMyMessage }) => isMyMessage ? 'black' : 'white',\r\n    background: ({ isMyMessage }) => isMyMessage ? 'lightgrey' : 'linear-gradient(130deg, rgba(39,31,208,1) 0%, rgba(32,167,253,1) 75%, rgba(106,194,255,1) 100%)'\r\n  },\r\n  messageDetails: {\r\n    display: 'flex',\r\n    justifyContent: ({ isMyMessage }) => isMyMessage ? 'end' : 'space-between',\r\n    alignItems: 'center',\r\n  },\r\n  \r\n  imageIcon:{\r\n    width: '15%',\r\n    borderRadius: theme.spacing(2),\r\n    marginRight: theme.spacing(1)\r\n  },\r\n  image: {\r\n    borderRadius: 10,\r\n    display: \"block\",\r\n    objectFit: \"contain\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n    outline: \"none\",\r\n  },\r\n}));\r\n","import React from \"react\";\r\nimport { useStyles } from \"./style\";\r\nimport { Typography  } from \"@material-ui/core\";\r\nimport ISO6391 from 'iso-639-1';\r\nimport { useLanguageContext, getMessageTextVersion } from \"context/language/languageContext\";\r\nimport { useUserStore } from \"context/user/userContext\";\r\n\r\n\r\nimport { dateToString } from 'utils/dateUtils'\r\nimport UserAvatar from \"components/UserAvatar\";\r\nconst MessageItem = (props) => {\r\n  const { sender, createdAt, textVersions, isMyMessage } = props\r\n  const { user } = useUserStore()\r\n  const { isOriginalLanguage } = useLanguageContext()\r\n  const classes = useStyles(props)\r\n\r\n  if (sender)\r\n    return (\r\n      <div className={classes.root}>\r\n        {!isMyMessage &&  <UserAvatar />}\r\n        <div className={classes.messageContianer}>\r\n\r\n          <div className={classes.messageDetails}>\r\n            {!isMyMessage && \r\n              <Typography variant='body2'>\r\n\r\n                <img\r\n                  className={classes.imageIcon}\r\n                  alt={sender.language}\r\n                  src={`https://unpkg.com/language-icons/icons/${ISO6391.getCode(sender.language)}.svg`}\r\n                />\r\n                {sender.name}\r\n              </Typography>\r\n\r\n            }\r\n            <Typography variant='caption'>{dateToString(createdAt)}</Typography>\r\n          </div>\r\n          <div className={classes.messageBox}>\r\n            {getMessageTextVersion({ textVersions }, isOriginalLanguage, user.language)}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  else return null;\r\n};\r\nexport default MessageItem;\r\n","import moment from 'moment'\r\nconst dateToString = (date) => {\r\n    let output = moment(date)\r\n    return output.format('HH:mm')\r\n}\r\n\r\nexport { dateToString }","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n        padding: 10,\r\n    },\r\n    textField: {\r\n        width: '100%',\r\n    }\r\n}));\r\n","import React, { useState } from \"react\";\r\nimport Picker from 'emoji-picker-react';\r\nimport { ButtonBase, Menu } from \"@material-ui/core\";\r\nimport SentimentSatisfiedOutlinedIcon from \"@material-ui/icons/SentimentSatisfiedOutlined\";\r\nconst EmojiButton = ({ value, onSelect }) => {\r\n  const [anchorEmojisMenu, setAnchorEmojisMenu] = useState(null)\r\n  const handleEmojiPick = (_, emojiObject) => {\r\n    onSelect('message', value + emojiObject.emoji)\r\n  }\r\n  const handleEmojiButtonClick = (event) => {\r\n    setAnchorEmojisMenu(event.currentTarget)\r\n  }\r\n  const handleEmojisClose = () => {\r\n    setAnchorEmojisMenu(null)\r\n  }\r\n  return (\r\n    <div>\r\n      <ButtonBase\r\n        aria-controls=\"customized-menu\"\r\n        aria-haspopup=\"true\"\r\n        onClick={handleEmojiButtonClick}\r\n      >\r\n        <SentimentSatisfiedOutlinedIcon />\r\n      </ButtonBase>\r\n      <Menu\r\n        id=\"customized-menu\"\r\n        anchorEl={anchorEmojisMenu}\r\n        open={Boolean(anchorEmojisMenu)}\r\n        onClose={handleEmojisClose}\r\n      >\r\n        <div>\r\n          <Picker\r\n            onEmojiClick={handleEmojiPick}\r\n            groupNames={{ smileys_people: \"PEOPLE\" }}\r\n            native\r\n          />\r\n        </div>\r\n      </Menu>\r\n    </div>\r\n  );\r\n};\r\nexport default EmojiButton;\r\n","import axios from \"axios\";\r\nimport ISO6391 from 'iso-639-1';\r\nexport const translateText = async (text, language) => {\r\n  try {\r\n    const languageCode = ISO6391.getCode(language)\r\n    console.log(languageCode)\r\n    const res = await axios.post(\r\n      `${process.env.REACT_APP_TRANSLATE_URL}/v2?target=${languageCode}&key=${process.env.REACT_APP_API_KEY}&q=${text}`\r\n    );\r\n\r\n    return res.data.data.translations[0].translatedText;\r\n  } catch (err) {\r\n    console.log(err)\r\n  }\r\n};\r\n","import { translateText } from \"context/messages/helper\"\r\nimport unescape from 'unescape'\r\nconst generateMessageVersions = async (users, currentUser, message) => {\r\n    const textVersions = {}\r\n    textVersions[currentUser.language] = message\r\n    for (let conversationUser of users) {\r\n        if (currentUser.language !== conversationUser.language) {\r\n            let newVersion = await translateText(message, conversationUser.language)\r\n\r\n            textVersions[conversationUser.language] = unescape(newVersion)\r\n\r\n        }\r\n    }\r\n    return textVersions\r\n}\r\n\r\nexport { generateMessageVersions }","import { InputAdornment, TextField } from '@material-ui/core'\r\nimport React from 'react'\r\nimport { Formik, Field, Form } from 'formik'\r\nimport { useStyles } from './styles'\r\nimport EmojiButton from 'components/EmojiButton'\r\nimport ConversationServices from 'services/apiCalls/conversation.services'\r\nimport { useUserStore } from 'context/user/userContext'\r\nimport { useCurrentConversationStore } from 'context/currentConversation/currentConversationContext'\r\nimport { generateMessageVersions } from './helper'\r\n\r\n\r\nconst MessageInput = () => {\r\n    const classes = useStyles()\r\n    const { user, socket } = useUserStore()\r\n    const currentConversation = useCurrentConversationStore()\r\n    const inputValues = {\r\n        message: '',\r\n        image: undefined\r\n    }\r\n    const handleMessageSubmit = async ({ message, image }, { resetForm }) => {\r\n        if (currentConversation._id) {\r\n            const messageData = {\r\n                textVersions: {}\r\n            }\r\n            if (message !== '')\r\n                messageData.textVersions = await generateMessageVersions(currentConversation.users, user, message)\r\n            if (image)\r\n                messageData.image = image\r\n            ConversationServices.sendMessage(currentConversation._id, messageData)\r\n                .then((res) => {\r\n                    //currentConversationDispatch(Action(ActionTypes.PUSH_MESSAGE, res.data.messageObject))\r\n                    socket.emit('new-message', {\r\n                        ...res.data.messageObject,\r\n                        conversationID: currentConversation._id\r\n                    })\r\n                    resetForm()\r\n                })\r\n                .catch((res) => console.log(res))\r\n        }\r\n    }\r\n    return (\r\n        <div className={classes.root}>\r\n            <Formik\r\n                initialValues={inputValues}\r\n                onSubmit={handleMessageSubmit}\r\n            >\r\n                {({ values, setFieldValue }) =>\r\n                    <Form>\r\n                        <Field\r\n                            className={classes.textField}\r\n                            name='message'\r\n                            type='text'\r\n                            placeholder='Send message...'\r\n                            variant='outlined'\r\n                            InputProps={{\r\n                                endAdornment:\r\n                                    <InputAdornment>\r\n                                        <EmojiButton value={values.message} onSelect={setFieldValue} />\r\n                                    </InputAdornment>,\r\n                            }}\r\n                            as={TextField}\r\n                        />\r\n                    </Form>\r\n                }\r\n            </Formik>\r\n        </div>\r\n    )\r\n}\r\nexport default MessageInput","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        maxHeight: '100%',\r\n        height: '100%',\r\n        width: '65%'\r\n    },\r\n    messagesContainer: {\r\n        minHeight: '80%',\r\n        maxHeight: '80%',\r\n        overflowY: 'scroll',\r\n        scrollbarWidth: 'none',\r\n        '&::-webkit-scrollbar': {\r\n            display: 'none'\r\n        }\r\n    }\r\n}));\r\n","import { makeStyles, withStyles } from \"@material-ui/core/styles\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    minHeight: \"10%\",\r\n    backgroundColor: \"#fff\",\r\n    boxShadow: \" 0 15px 15px #f5f7fb\",\r\n  },\r\n  leftRightSideStyle: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: 20,\r\n  },\r\n  onOfflineStyle: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    width: 50,\r\n  },\r\n  typography: {\r\n    fontSize: \"0.9rem\",\r\n    fontWeight: 600,\r\n    color: \"#3A8DFF\",\r\n  },\r\n  [`@media (max-width:510px)`]: {\r\n    root: {\r\n      flexDirection: \"column\",\r\n      justifyContent: \"center\",\r\n      padding: 10,\r\n    },\r\n    leftRightSideStyle: {\r\n      padding: 0,\r\n    },\r\n    typography: {\r\n      fontSize: \"1.3rem\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport const StyledBadge = withStyles((theme) => ({\r\n  badge: {\r\n    backgroundColor: \"#44b700\",\r\n    color: \"#44b700\",\r\n    boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n    width: theme.spacing(1.1),\r\n    height: theme.spacing(1.1),\r\n    borderRadius: \"50%\",\r\n    \"&::after\": {\r\n      position: \"absolute\",\r\n      top: 0,\r\n      left: 0,\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      borderRadius: \"50%\",\r\n      animation: \"$ripple 1.2s infinite ease-in-out\",\r\n      border: \"1px solid currentColor\",\r\n      content: '\"\"',\r\n    },\r\n  },\r\n  \"@keyframes ripple\": {\r\n    \"0%\": {\r\n      transform: \"scale(.8)\",\r\n      opacity: 1,\r\n    },\r\n    \"100%\": {\r\n      transform: \"scale(2.4)\",\r\n      opacity: 0,\r\n    },\r\n  },\r\n}))(Badge);\r\n","import React from \"react\";\r\nimport { Typography, Switch, ButtonBase } from \"@material-ui/core\";\r\nimport { useStyles } from \"./style\";\r\nimport { MoreHoriz } from \"@material-ui/icons\";\r\nimport { useLanguageContext } from \"context/language/languageContext\";\r\n\r\n\r\nconst ChatHeader = () => {\r\n\r\n  const classes = useStyles();\r\n  const { isOriginalLanguage, toggleOrginalLanguage } = useLanguageContext()\r\n  const handleChange = () => {\r\n    toggleOrginalLanguage()\r\n    console.log(isOriginalLanguage)\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.leftRightSideStyle}>\r\n        {isOriginalLanguage ? (\r\n          <Typography variant=\"body2\" className={classes.typography}>\r\n            Original language\r\n          </Typography>\r\n        ) : (\r\n          <Typography\r\n            variant=\"body2\"\r\n            className={classes.typography}\r\n            style={{\r\n              color: 'grey',\r\n              opacity: 0.5,\r\n            }}\r\n          >\r\n            Original language\r\n          </Typography>\r\n        )}\r\n        <Switch\r\n          checked={isOriginalLanguage}\r\n          onChange={handleChange}\r\n          color=\"primary\"\r\n          name=\"checked\"\r\n          inputProps={{ \"aria-label\": \"secondary checkbox\" }}\r\n        />\r\n        <ButtonBase\r\n          onClick={() => console.log(\"Clicked\")}\r\n          style={{ marginLeft: 20 }}\r\n        >\r\n          <MoreHoriz />\r\n        </ButtonBase>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatHeader;\r\n","import React, { useEffect, useRef } from 'react'\r\nimport { useCurrentConversationDispatch, useCurrentConversationStore } from 'context/currentConversation/currentConversationContext'\r\nimport MessageItem from 'components/MessageItem'\r\nimport MessageInput from 'components/MessageInput'\r\nimport Action, { ActionTypes } from 'types'\r\nimport { useStyles } from './styles'\r\nimport { useUserStore } from 'context/user/userContext'\r\nimport ChatHeader from 'containers/ChatHeader'\r\nconst ChatView = () => {\r\n    const { user, socket } = useUserStore()\r\n    const { _id, messages, users } = useCurrentConversationStore()\r\n    const currentConversationDispatch = useCurrentConversationDispatch()\r\n    const classes = useStyles()\r\n    const bottomDivRef = useRef()\r\n    const scrollToBottom = () => bottomDivRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n    const getSenderData = (sender) => {\r\n        return users.find(user => user._id === sender)\r\n    }\r\n    useEffect(scrollToBottom, [messages])\r\n    useEffect(() => {\r\n        socket.on(`${_id}-message`, messageData => {\r\n            console.log('Message Pushed', _id)\r\n            currentConversationDispatch(Action(ActionTypes.PUSH_MESSAGE, messageData))\r\n        })\r\n        return () => socket.off(`${_id}-message`)\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [_id])\r\n    const messagesMap = () => {\r\n        const output = messages.map(({ sender, ...rest }, idx) => {\r\n            return <MessageItem\r\n                key={idx}\r\n                sender={getSenderData(sender)}\r\n                {...rest}\r\n                isMyMessage={sender === user._id}\r\n            />\r\n        })\r\n        return output\r\n    }\r\n    return (\r\n        <div className={classes.root}>\r\n            <ChatHeader />\r\n            <div className={classes.messagesContainer}>\r\n                {messagesMap()}\r\n                <div ref={bottomDivRef} />\r\n            </div>\r\n            <MessageInput />\r\n        </div>\r\n\r\n    )\r\n}\r\nexport default ChatView","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        padding: 0,\r\n        height: '100vh',\r\n        overflow: 'hidden'\r\n    },\r\n    item: {\r\n        maxHeight: '100%'\r\n    }\r\n}));\r\n","import Sidebar from 'containers/Sidebar'\r\nimport React from 'react'\r\nimport CurrentConversationProvider from 'context/currentConversation/currentConversationContext'\r\nimport ChatView from 'containers/ChatView'\r\nimport { useStyles } from './styles'\r\nconst Home = () => {\r\n    const classes = useStyles()\r\n    return (\r\n        <CurrentConversationProvider>\r\n            <div className={classes.root}>\r\n                <Sidebar />\r\n                <ChatView />\r\n            </div>\r\n        </CurrentConversationProvider>\r\n    )\r\n}\r\nexport default Home","import React from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n} from \"react-router-dom\";\r\nimport { theme } from \"./themes/theme\";\r\n//import { useUserDispatch, fetchUserData } from \"./context/user/userContext\"\r\nimport {\r\n  ThemeProvider,\r\n  Container,\r\n  CssBaseline,\r\n} from \"@material-ui/core\";\r\nimport \"./App.css\";\r\n\r\n//import socket from \"./socket-client/socket\";\r\nimport PrivateRoute from './hocs/privateRoute'\r\nimport UnPrivateRoute from './hocs/unPrivateRoute'\r\nimport LandingPage from \"./containers/LandingPage\"\r\nimport Home from 'containers/Home'\r\n\r\n\r\n\r\nconst dotenv = require(\"dotenv\");\r\ndotenv.config();\r\nfunction App() {\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <CssBaseline />\r\n      <Router>\r\n        <Container maxWidth=\"lg\" style={{ margin: \"auto\" }}>\r\n          <Switch>\r\n            <UnPrivateRoute exact path=\"/\" component={LandingPage} />\r\n            <PrivateRoute path=\"/home\" component={Home} />\r\n          </Switch>\r\n        </Container>\r\n      </Router>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { UserProvider } from \"context/user/userContext\";\r\nimport ConversationsProvider from 'context/conversations/conversationsContext'\r\nimport LanguageProvider from 'context/language/languageContext'\r\nimport ContactsProvider from \"context/contacts/contactsContext\";\r\n\r\nReactDOM.render(\r\n  <UserProvider>\r\n    <ConversationsProvider>\r\n      <ContactsProvider>\r\n        <LanguageProvider>\r\n          <App />\r\n        </LanguageProvider>\r\n      </ContactsProvider>\r\n    </ConversationsProvider>\r\n  </UserProvider>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}