(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{286:function(e,t,n){e.exports=n.p+"static/media/avatar.f1bf8dfd.png"},391:function(e,t){},393:function(e,t){},404:function(e,t){},406:function(e,t){},433:function(e,t){},435:function(e,t){},436:function(e,t){},442:function(e,t){},444:function(e,t){},462:function(e,t){},464:function(e,t){},476:function(e,t){},479:function(e,t){},564:function(e,t,n){"use strict";n.r(t);var a=n(23),r=n(0),o=n.n(r),c=n(53),i=n(533),l=Object(i.a)((function(e){return{root:Object(c.a)({display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",padding:e.spacing(1)},"@media (max-width:820px)",{flexDirection:"column",justifyContent:"flex-start",alignItems:"center"})}})),s=Object(i.a)((function(e){return{root:Object(c.a)({display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2.5),paddingTop:0,width:"35%",minWidth:410,height:"100%",backgroundColor:"#f5f7fb"},"@media (max-width:820px)",{width:"100%",minWidth:0})}})),u=n(3),m=n.n(u),d=n(8),p=n(535),f=n(571),g=n(567),b=n(511),h=n(550),O=Object(i.a)((function(e){return Object(c.a)({root:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",minHeight:"10vh",backgroundColor:"transparent"},leftRightSideStyle:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(2)},badge:{top:63,right:5},typography:{fontWeight:600,textAlign:"center"},logoutStyle:{color:"black",textDecoration:"none"}},"@media (max-width:400px)",{root:{padding:e.spacing(2)},leftRightSideStyle:{flexDirection:"column",height:"10vh",padding:0},typography:{fontSize:"1.3rem"}})})),v=n(349),E=n(579),j=n(574),y=n(286),C=n.n(y),x=n(548),S=n(21),w=Object(S.a)((function(e){return{badge:{backgroundColor:"#D3D3D3",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),width:e.spacing(1.4),height:e.spacing(1.4),borderRadius:"50%",top:e.spacing(5),right:e.spacing(.5)}}}))(x.a),k=Object(S.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),width:e.spacing(1.1),height:e.spacing(1.1),borderRadius:"50%",top:e.spacing(5),right:e.spacing(.5),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(x.a),_=Object(i.a)((function(e){return Object(c.a)({root:{display:"flex","& > *":{margin:e.spacing(1),marginRight:e.spacing(3)}},avatar:{width:e.spacing(6.5),height:e.spacing(6.5)}},"@media (max-width:400px)",{root:{"& > *":{marginRight:e.spacing(1)}}})})),T=Object(r.memo)((function(e){var t=e.imageUrl,n=e.isOnline,a=_(),r="";return r=void 0!==t&&void 0!==t.url&&t.url.includes("http")?t.url:C.a,o.a.createElement("div",{className:a.root},n?o.a.createElement(k,{overlap:"circle",anchororigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},o.a.createElement(j.a,{variant:"circle",alt:"Online Badge","data-testid":"online",src:r,className:a.avatar})):o.a.createElement(w,{overlap:"circle",anchororigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},o.a.createElement(j.a,{variant:"circle",alt:"Offline Badge","data-testid":"offline",src:r,className:a.avatar})))})),N=n(6),R=n(9),D=n.n(R),P=n(387),I=n.n(P),A=(n(513),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FB_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DATABASE_URL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_APP_ID,measurementId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_MEASUREMENT_ID});I.a.initializeApp(A),I.a.storage();var W=I.a;function B(e,t){return e<0?Promise.reject("out of tries"):t.getDownloadURL().then((function(e){return e})).catch((function(n){switch(n.code){case"storage/object-not-found":return(a=2e3,new Promise((function(e){setTimeout(e.bind(null,r),a)}))).then((function(){return B(e-1,t)})).catch((function(e){return console.log("Error caught ",e.message)}));default:return console.log(n),Promise.reject(n)}var a,r}))}var L=n(389),U=W.storage().ref(),K=function(){var e=Object(d.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===n){e.next=4;break}return e.next=4,D.a.put("user/".concat(a,"/image"),{newImageData:Object(N.a)({},t)});case 4:if(null===n||void 0===n||!n.name){e.next=8;break}return r=U.child("photos/".concat(n.name)),e.next=8,r.delete();case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),Error("Oops, something went wrong ",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,a){return e.apply(this,arguments)}}(),H=function(){var e=Object(d.a)(m.a.mark((function e(t,n,a){var r,o,c,i,l,s,u,d,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",o="",i=L({length:10}),Object.defineProperties(t,{name:{value:i+t.name,writable:!0}}),c=null===n?U.child("user-images/".concat(t.name)):U.child("photos/".concat(t.name)),e.next=7,c.put(t,{name:t.name});case 7:if((l=t.name.split(".")).splice(l.length-1,0,"_200x200."),o=l.join(""),null!==n){e.next=18;break}return s=U.child("user-images/".concat(o)),e.next=14,B(10,s);case 14:u=e.sent,r=u,e.next=23;break;case 18:return s=U.child("photos/".concat(o)),e.next=21,B(10,s);case 21:d=e.sent,r=d;case 23:return p={url:r,name:o},e.next=26,K(p,n,a);case 26:return e.abrupt("return",p);case 27:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=U.child("user-images/".concat(t)),e.next=3,n.delete().catch((function(e){console.log("Oops, image failed to be deleted ",e.message),new Error(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=n(61),M=n(27),F=n(56),G=n(59),J=n(32),Y=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(null),l=Object(a.a)(i,2),s=l[0],u=l[1],j=Object(r.useState)({}),y=Object(a.a)(j,2),C=y[0],x=y[1],S=O(),w=Object(M.e)().user,k=Object(M.d)(),_=Object(F.k)(),N=Object(G.d)(),R=localStorage.getItem("auth-token");Object(r.useEffect)((function(){x(w)}),[w]);var D=function(){u(null)},P=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!1),u(null),e.next=4,H(t[0],C.pictureURL,C.email);case 4:Object(M.b)(k);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:S.root},o.a.createElement("div",{className:S.leftRightSideStyle},o.a.createElement(T,{isOnline:!!R,imageUrl:C.pictureURL}),o.a.createElement(p.a,{variant:"body2",className:S.typography},C.name)),o.a.createElement("div",{className:S.leftRightSideStyle},o.a.createElement(f.a,{title:"More actions",placement:"bottom",arrow:!0},o.a.createElement(g.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},style:{marginLeft:20}},o.a.createElement(E.a,null))),o.a.createElement(b.a,{id:"simple-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:D},o.a.createElement(h.a,{onClick:function(){return c(!0)}},"Replace picture"),o.a.createElement(h.a,{onClick:function(){localStorage.removeItem("auth-token"),u(null),Object(F.i)(_),Object(G.c)(N),J.a.emit("logout",C.email),J.a.off()}},o.a.createElement(V.c,{to:"/login",className:S.logoutStyle},"Log out"))),o.a.createElement(v.a,{open:n,onSave:P,showPreviews:!0,maxFileSize:15e5,onClose:function(){c(!1),D()}})))},$=n(512),q=Object(i.a)((function(e){return Object(c.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,width:"100%",height:"100%",backgroundColor:"transparent",overflow:"hidden"},tabs:{backgroundColor:"#f5f7fb",borderColor:"none"},tabPanel:{width:"100%",height:"100%"},search:Object(c.a)({display:"flex",justifyContent:"center",borderRadius:e.shape.borderRadius,backgroundColor:"#e9eef9",marginTop:e.spacing(2),marginBottom:e.spacing(2),minWidth:"100%",height:e.spacing(7)},e.breakpoints.up("sm"),{width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},clearIcon:{padding:e.spacing(0,2),height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},debounceInput:{border:"none",height:"100%",width:"70%",backgroundColor:"transparent",fontSize:"1.3rem",right:0,outline:"none"},collapse:{textAlign:"center",marginBottom:e.spacing(3),width:"100%"},alert:{display:"flex",alignItems:"center",justifyContent:"center"}},"@media (max-width:400px)",{tabs:{display:"flex",alignItems:"center",justifyContent:"center"}})})),Q=n(183),X=n(559),Z=n(565),ee=n(560),te=n(556),ne=n(497),ae=n.n(ne),re=Object(i.a)((function(e){return{root:{padding:0,maxHeight:"65vh",flexGrow:1,overflow:"auto",backgroundColor:"transparent","-ms-overflow-style":"none","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}}})),oe=Object(i.a)((function(e){return Object(c.a)({root:{display:"flex",alignItems:"center",padding:e.spacing(2),marginBottom:e.spacing(2),width:"100%",borderRadius:e.spacing(1),backgroundColor:"#f9fafc",boxShadow:"0 0 1px 0 grey"},avatarNameContainer:{display:"flex",alignItems:"center",width:"75%",height:"100%"},nameContainer:{display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"center"},chip:{display:"block",marginLeft:e.spacing(1),marginRight:e.spacing(1)}},"@media (max-width:360px)",{avatarNameContainer:{flexDirection:"column",justifyContent:"center"}})})),ce=n(551),ie=Object(r.createContext)(),le=Object(r.createContext)(null),se=Object(r.memo)((function(e){var t=oe(),n=Object(M.e)().user,c=Object(F.k)(),i=Object(F.l)(),l=i.contacts,s=i.unknownUsers,u=e.conversation,m=e.index,d=e.select,f=e.selected,g=e.lastMessage,b=e.usersData,h=u.users.filter((function(e){return e!==n.email})),O=Object(r.useContext)(le),v=Object(r.useContext)(ie),E=Object(r.useState)(),j=Object(a.a)(E,2),y=j[0],C=j[1],x=Object(r.useState)(""),S=Object(a.a)(x,2),w=S[0],k=S[1];return Object(r.useEffect)((function(){g&&k(g[O.original?Object.keys(g)[0]:n.language])}),[O,g,n.language]),Object(r.useEffect)((function(){var e=!1;Object.keys(l).length&&h.forEach((function(t){l[t]||t===n.email||s[t]||(Object(F.b)(t,s,c),e=!0)})),e&&Object(F.f)(n.email,c)}),[u,h,c,l,s,n.email]),Object(r.useEffect)((function(){Object.keys(b).length&&C(h.reduce((function(e,t){return b[t]&&e.push(b[t].name),e}),[]).join())}),[b,h]),o.a.createElement(ce.a,{button:!0,className:t.root,onClick:function(e){d(e,m),v.setConversation(u.conversationID)},selected:f===m},o.a.createElement("div",{className:t.avatarNameContainer},1===h.length&&o.a.createElement(T,{imageUrl:void 0!==b[h[0]]&&b[h[0]].pictureUrl,isOnline:void 0!==b[h[0]]&&b[h[0]].isOnline}),o.a.createElement("div",{className:t.nameContainer},o.a.createElement(p.a,{variant:"body1",style:{marginBottom:0,fontWeight:600},gutterBottom:!0},y),o.a.createElement(p.a,{variant:"body2",style:{marginBottom:0,fontWeight:600,fontSize:"0.8rem"},gutterBottom:!0},w))))})),ue=n(549),me=function(e){var t=e.usersData,n=re(),r=o.a.useState(-1),c=Object(a.a)(r,2),i=c[0],l=c[1],s=Object(G.e)().conversations,u=function(e,t){l(t)};return o.a.createElement(ue.a,{className:n.root},s.length>0?s.map((function(e,n){return(e.messageCount>0||e.users.length>2)&&t?o.a.createElement(se,{key:n,conversation:e,index:n,select:u,selected:i,lastMessage:e.lastMessage?e.lastMessage.textVersions:void 0,usersData:t}):null})):o.a.createElement(p.a,{variant:"body1",color:"primary",gutterBottom:!0,style:{color:"black",textAlign:"center"}},"No group chats"))},de=n(540),pe=n(545),fe=n(544),ge=n(552),be=n(572),he=n(555),Oe=n(547),ve=n(546),Ee=n(566),je=n(487),ye=n.n(je),Ce=n(483),xe=function(e){var t=e.open,n=e.isAlertOpen,c=e.alertError,i=e.onClose,l=e.handleSendEmail,s=e.userId,u=e.setCopied,m=e.copied,d=e.onCopy,f=Object(r.useState)(""),g=Object(a.a)(f,2),b=g[0],h=g[1],O="https://peppermint-chat.netlify.app/signup?referrer=".concat(s);return o.a.createElement(de.a,{fullWidth:!0,open:t,onClose:function(){i(),u(!1)},"aria-labelledby":"invitation-dialog-title"},o.a.createElement(pe.a,{style:{margin:"10%"}},o.a.createElement(fe.a,{id:"invitation-dialog-title"},o.a.createElement(p.a,{style:{fontWeight:600}},"Invite friends to messenger")),o.a.createElement(ge.a,{mx:"auto"},"Send your friends an invite email"),o.a.createElement(be.a,{autoFocus:!0,id:"emailToInvite",label:"Email Address",type:"email",variant:"outlined",onChange:function(e){return h(e.target.value)},fullWidth:!0}),o.a.createElement(ge.a,null,"Or share referral link"),o.a.createElement(be.a,{disabled:!0,id:"linkToInvite",variant:"outlined",value:O,fullWidth:!0,InputProps:{endAdornment:o.a.createElement(he.a,{position:"end"},o.a.createElement(Ce.CopyToClipboard,{text:O,onCopy:function(){return d()}},m?o.a.createElement(Oe.a,{variant:"contained",color:"secondary",style:{backgroundColor:"green"}},"Copied"):o.a.createElement(Oe.a,{variant:"contained",color:"primary"},"Copy")))}}),o.a.createElement(ve.a,null,o.a.createElement(Oe.a,{color:"primary",onClick:function(){return l(b)}},"Send Invite")),o.a.createElement(te.a,{in:n},c?o.a.createElement(Ee.a,{severity:"error"},c):o.a.createElement(Ee.a,{icon:o.a.createElement(ye.a,{fontSize:"inherit"}),severity:"success",style:{textAlign:"center",marginBottom:20}},"User invited"))))},Se=Object(i.a)((function(e){return Object(c.a)({root:{padding:0,maxHeight:"63vh",flexGrow:1,overflow:"auto",backgroundColor:"transparent","-ms-overflow-style":"none","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}},inviteFriendsContainer:{display:"flex",justifyContent:"flex-start",alignItems:"center",paddingLeft:e.spacing(2),marginBottom:e.spacing(1),width:"100%",backgroundColor:"transparent"},typography:{marginBottom:0,marginLeft:10,fontWeight:600}},"@media (max-width:400px)",{typography:{fontSize:"1.3rem"}})})),we=Object(i.a)((function(e){return Object(c.a)({root:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:e.spacing(2),paddingTop:0,paddingBottom:0,marginBottom:e.spacing(1),width:"100%",borderRadius:e.spacing(1),backgroundColor:"transparent"},avatarNameContainer:{display:"flex",alignItems:"center",width:"50%",height:"100%"},chip:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},buttonBase:{marginLeft:20,marginRight:20,padding:10,borderRadius:"50%"},contactName:{marginBottom:0,fontWeight:600}},"@media (max-width:400px)",{avatarNameContainer:{flexDirection:"column",justifyContent:"center"},contactName:{fontSize:"1.3rem"}})})),ke=Object(r.memo)((function(e){var t=e.pictureUrl,n=e.name,c=e.email,i=e.index,l=e.isOnline,s=e.handleDeleteContactButton,u=e.contact,m=e.select,d=e.selected,O=Object(r.useState)(null),v=Object(a.a)(O,2),j=v[0],y=v[1],C=Object(r.useContext)(ie),x=we();return o.a.createElement(ce.a,{button:!0,className:x.root,onClick:function(e){m(e,i),C.setConversation(u.conversationID)},selected:d===i},o.a.createElement("div",{className:x.avatarNameContainer},o.a.createElement(T,{imageUrl:t,isOnline:l}),o.a.createElement(p.a,{variant:"body1",className:x.contactName,gutterBottom:!0},n)),o.a.createElement(f.a,{title:"Delete contact",placement:"bottom",arrow:!0},o.a.createElement(g.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){y(e.currentTarget)},className:x.buttonBase},o.a.createElement(E.a,null))),o.a.createElement(b.a,{id:"simple-menu",anchorEl:j,keepMounted:!0,open:Boolean(j),onClose:function(){y(null)}},o.a.createElement(h.a,{onClick:function(){return s(c)}},"Delete contact")))})),_e=n(492),Te=n.n(_e),Ne=n(493),Re=n.n(Ne),De=n(488),Pe=n.n(De),Ie=n(350),Ae=n(570),We=n(557),Be=n(558),Le=function(e){var t=e.open,n=e.onClose,i=e.contactsList,l=Object(M.e)().user,s=Object(r.useState)({}),u=Object(a.a)(s,2),m=u[0],d=u[1],p=Object(G.d)(),f=function(e){d(Object(N.a)(Object(N.a)({},m),{},Object(c.a)({},e.target.name,e.target.checked)))};return Object(r.useEffect)((function(){Object.keys(i).forEach((function(e){d((function(t){return Object(N.a)(Object(N.a)({},t),{},Object(c.a)({},e,!1))}))}))}),[i]),o.a.createElement(de.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title"},o.a.createElement(fe.a,{id:"form-dialog-title"},"Create Group Chat"),o.a.createElement(pe.a,null,o.a.createElement(We.a,null,!!Object.keys(i).length&&Object.keys(i).map((function(e,t){return o.a.createElement(Be.a,{key:t,control:o.a.createElement(Ae.a,{checked:m[e],name:e,color:"primary",onChange:f}),label:e})})))),o.a.createElement(ve.a,null,o.a.createElement(Oe.a,{onClick:n,color:"secondary"},"Cancel"),o.a.createElement(Oe.a,{onClick:function(){var e=Object.entries(m).reduce((function(e,t){var n=Object(a.a)(t,2),r=n[0];return!0===n[1]&&(d((function(e){return Object(N.a)(Object(N.a)({},e),{},Object(c.a)({},r,!1))})),e.push(r)),e}),[]);D.a.post("/user/groupchat",[].concat(Object(Ie.a)(e),[l.email])).then((function(e){Object(G.b)(l.email,p),n()})).catch((function(e){11e3===e.response.data.code&&(alert("chat already exists"),n())}))},color:"primary"},"Create")))},Ue=function(){var e=Object(r.useState)(-1),t=Object(a.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(!1),l=Object(a.a)(i,2),s=l[0],u=l[1],f=Se(),b=Object(r.useState)(!1),h=Object(a.a)(b,2),O=h[0],v=h[1],E=Object(r.useState)(!1),j=Object(a.a)(E,2),y=j[0],C=j[1],x=Object(r.useState)(null),S=Object(a.a)(x,2),w=S[0],k=S[1],_=function(){v(!1),k(null)},T=Object(F.k)(),N=Object(F.l)().contacts,R=Object(M.e)().user,P=Object(F.m)(),I=function(e){Object(F.e)(P,e,T)},A=function(e,t){c(t)},W=Object(r.useState)(!1),B=Object(a.a)(W,2),L=B[0],U=B[1],K=function(){C(!0),setTimeout((function(){v(!1),C(!1)}),3e3)},H=function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Pe()(t)){e.next=6;break}return C(!0),k("Email is not valid. Please verify it is correct."),setTimeout((function(){C(!1)}),3e3),e.abrupt("return");case 6:try{"",n&&(k(null),D.a.get("/api/user/".concat(t)).then(function(){var e=Object(d.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("/user/".concat(P,"/invite"),{contact:t});case 2:e.sent,K();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(d.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(400!==n.response.status){e.next=5;break}return e.next=3,D.a.post("/mail/".concat(t,"/sendMail"));case 3:200===e.sent.status&&K();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}catch(a){k(a.message),setTimeout((function(){C(!1)}),3e3)}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{onClick:function(){return v(!0),void k(null)},style:{marginBottom:10}},o.a.createElement("div",{className:f.inviteFriendsContainer},o.a.createElement(Te.a,{color:"primary"}),o.a.createElement(p.a,{variant:"body2",color:"primary",className:f.typography,gutterBottom:!0},"Invite Friends"))),o.a.createElement(g.a,{onClick:function(){U(!0)},style:{marginBottom:10}},o.a.createElement("div",{className:f.inviteFriendsContainer},o.a.createElement(Re.a,{color:"primary"}),o.a.createElement(p.a,{variant:"body2",color:"primary",className:f.typography,gutterBottom:!0},"Create Group Chat"))),o.a.createElement(xe,{open:O,isAlertOpen:y,alertError:w,userId:R.id,copied:s,setCopied:u,onClose:_,onCopy:function(){u(!0),setTimeout((function(){_()}),1e3),setTimeout((function(){u(!1)}),2e3)},handleSendEmail:H}),o.a.createElement(Le,{open:L,onClose:function(){U(!1)},contactsList:N}),o.a.createElement(ue.a,{className:f.root},N?Object.keys(N).map((function(e,t){return o.a.createElement(ke,{key:t,name:N[e].name,email:e,pictureUrl:N[e].pictureUrl,isOnline:N[e].isOnline,index:t,handleDeleteContactButton:I,contact:N[e],select:A,selected:n})})):o.a.createElement(p.a,{variant:"body1",color:"primary",gutterBottom:!0,style:{color:"black",textAlign:"center"}},"No contacts")))},Ke=Object(i.a)((function(e){return{root:{padding:0,maxHeight:"63vh",flexGrow:1,overflow:"auto",backgroundColor:"transparent","-ms-overflow-style":"none","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}}})),He=Object(i.a)((function(e){return Object(c.a)({root:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(2),paddingTop:0,paddingBottom:0,marginBottom:e.spacing(1),width:"100%",borderRadius:e.spacing(1),backgroundColor:"transparent"},typography:{fontSize:e.spacing(2),marginBottom:0,fontWeight:600}},"@media (max-width:400px)",{root:{flexDirection:"column",justifyContent:"center"},typography:{fontSize:"1.3rem",marginBottom:e.spacing(1)}})}));function ze(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}function Ve(){var e=Object(r.useState)(ze()),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(r.useEffect)((function(){function e(){o(ze())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}var Me=Object(r.memo)((function(e){var t=e.email,n=e.handleApproveContact,a=e.handleRejectContact,r=Ve().width,c=He();return o.a.createElement(ce.a,{className:c.root},o.a.createElement(p.a,{variant:"body2",className:c.typography,gutterBottom:!0},t),o.a.createElement(Q.a,{component:"span"},o.a.createElement(Oe.a,{variant:"outlined",size:r>400?"small":"medium",color:"primary",onClick:function(){return n(t)}},"Approve"),o.a.createElement(Oe.a,{variant:"outlined",size:r>400?"small":"medium",color:"secondary",style:{marginLeft:10},onClick:function(){return a(t)}},"Reject")))})),Fe=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],i=Ke(),l=Object(F.k)(),s=Object(F.l)().invitations,u=Object(F.m)();Object(r.useEffect)((function(){u&&!s.length&&Object(F.f)(u,l)}),[u,s.length,l]),Object(r.useEffect)((function(){c(s)}),[s]);var m=function(e){return Object(F.c)(u,e,l)},d=function(e){return Object(F.h)(u,e,l)};return o.a.createElement("div",{className:i.root},o.a.createElement(ue.a,{className:i.root},n.length?n.map((function(e,t){return o.a.createElement(Me,{key:t,email:e.email,index:t,handleApproveContact:m,handleRejectContact:d})})):o.a.createElement(p.a,{variant:"body1",color:"primary",gutterBottom:!0,style:{color:"black",textAlign:"center"}},"No contacts")))},Ge=n(494),Je=n(498),Ye=n.n(Je);function $e(e){var t=e.children,n=e.value,a=e.index,r=Object($.a)(e,["children","value","index"]);return o.a.createElement("div",Object.assign({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},r),n===a&&o.a.createElement(Q.a,null,t))}function qe(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var Qe=function(){var e=q(),t=Object(r.useState)(0),n=Object(a.a)(t,2),c=n[0],i=n[1],l=Object(r.useState)(""),s=Object(a.a)(l,2),u=s[0],b=s[1],h=Object(r.useState)(!1),O=Object(a.a)(h,2),v=O[0],E=O[1],j=Ve().width,y=Object(F.k)(),C=Object(F.l)(),x=C.contacts,S=C.unknownUsers,w=Object(r.useState)(),k=Object(a.a)(w,2),_=k[0],T=k[1],R=Object(G.d)(),D=Object(G.e)().conversations,P=Object(F.m)();Object(r.useEffect)((function(){P&&Object(F.f)(P,y)}),[P,y]),Object(r.useEffect)((function(){0!==c&&2!==c||b("")}),[c]),Object(r.useEffect)((function(){Object.keys(x).length&&T(Object(N.a)(Object(N.a)({},x),S))}),[x,S]),Object(r.useEffect)((function(){P&&!D.length&&Object(G.b)(P,R)}),[P,D.length,R]);var I=function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(t),e.next=3,Object(F.g)(P,t,y);case 3:n=e.sent,i(1),n||(E(!0),setTimeout((function(){return E(!1)}),2e3));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:e.root},o.a.createElement(X.a,{position:"static",style:{color:"black",maxWidth:"100%",backgroundColor:"#f5f7fb",boxShadow:"none"}},o.a.createElement(Z.a,{value:c,onChange:function(e,t){i(t)},"aria-label":"simple tabs example",variant:"fullWidth",orientation:j>400?"horizontal":"vertical",className:e.tabs},o.a.createElement(ee.a,Object.assign({label:"Chats"},qe(0),{style:{minWidth:"33%",outline:"none"}})),o.a.createElement(ee.a,Object.assign({label:"Contacts"},qe(1),{style:{minWidth:"33%",outline:"none"}})),o.a.createElement(ee.a,Object.assign({label:"Invitations"},qe(2),{style:{minWidth:"33%",outline:"none"}})))),o.a.createElement("div",{className:e.search},o.a.createElement("div",{className:e.searchIcon},o.a.createElement(ae.a,null)),o.a.createElement(Ge.DebounceInput,{className:e.debounceInput,onChange:function(e){return I(e.target.value)},debounceTimeout:300,value:u,minLength:2}),o.a.createElement(f.a,{title:"Clear search",placement:"bottom",arrow:!0},o.a.createElement(g.a,{onClick:function(){Object(F.f)(P,y),b("")},className:e.clearIcon},o.a.createElement(Ye.a,null)))),o.a.createElement(te.a,{in:v,className:e.collapse},o.a.createElement(Ee.a,{severity:"info",className:e.alert},o.a.createElement(p.a,{variant:"body1"},"Oops, no contact found"))),o.a.createElement($e,{value:c,index:0,className:e.tabPanel},o.a.createElement(me,{usersData:_})),o.a.createElement($e,{value:c,index:1,className:e.tabPanel},o.a.createElement(Ue,null)),o.a.createElement($e,{value:c,index:2,className:e.tabPanel},o.a.createElement(Fe,null)))},Xe=function(){var e=s();return o.a.createElement("section",{className:e.root},o.a.createElement(Y,null),o.a.createElement(Qe,null))},Ze=Object(i.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,height:"100%",width:"100%",backgroundColor:"#fff"}}})),et=n(561),tt=Object(i.a)((function(e){return Object(c.a)({root:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",minHeight:"10vh",backgroundColor:"#fff",boxShadow:" 0 15px 15px #f5f7fb"},leftRightSideStyle:{display:"flex",justifyContent:"center",alignItems:"center",padding:20},onOfflineStyle:{display:"flex",justifyContent:"space-between",alignItems:"center",width:50},typography:{fontSize:"0.9rem",fontWeight:600,color:"#3A8DFF"}},"@media (max-width:510px)",{root:{flexDirection:"column",justifyContent:"center",padding:20},leftRightSideStyle:{padding:0},typography:{fontSize:"1.3rem"}})})),nt=Object(S.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),width:e.spacing(1.1),height:e.spacing(1.1),borderRadius:"50%","&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(x.a),at=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=t[0],c=t[1],i=tt(),l=Object(r.useContext)(le),s=Object(M.e)().user;return o.a.createElement("div",{className:i.root},o.a.createElement("div",{className:i.leftRightSideStyle},o.a.createElement(p.a,{variant:"h6",style:{fontWeight:600,marginLeft:20,marginRight:20}},s.name),o.a.createElement("div",{className:i.onOfflineStyle},o.a.createElement(nt,{overlap:"circle",variant:"dot"},o.a.createElement("span",null)),o.a.createElement(p.a,{variant:"body2",style:{fontSize:"0.8rem"}},"Online"))),o.a.createElement("div",{className:i.leftRightSideStyle},n?o.a.createElement(p.a,{variant:"body2",className:i.typography},"Original language"):o.a.createElement(p.a,{variant:"body2",className:i.typography,style:{color:"grey",opacity:.5}},"Original language"),o.a.createElement(et.a,{checked:n,onChange:function(){c(!n),l.setOriginal(!n)},color:"primary",name:"checked",inputProps:{"aria-label":"secondary checkbox"}}),o.a.createElement(g.a,{onClick:function(){return console.log("Clicked")},style:{marginLeft:20}},o.a.createElement(E.a,null))))},rt=Object(i.a)((function(e){return Object(c.a)({root:{display:"flex",flexDirection:"column",width:"100%",height:"90vh",padding:e.spacing(2.5),paddingTop:0},messegesView:{width:"100%",flexGrow:1,overflow:"auto",backgroundColor:"transparent","-ms-overflow-style":"none","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}},messageInput:{justifyContent:"flex-end"}},"@media (max-width:820px)",{root:{height:"45vh"}})})),ot=Object(i.a)((function(e){return{root:{width:"100%",padding:e.spacing(2)},messageView:{display:"flex","&.my":{justifyContent:"flex-end"},"&.other":{justifyContent:"flex-start"}},messageInfo:{marginLeft:e.spacing(2),maxWidth:"60%"},messageDetails:{fontSize:"0.7em","&.my":{textAlign:"right"},"&.other":{textAlign:"left"}},messageText:{borderRadius:10,padding:10,"&.my":{textAlign:"right",borderBottomRightRadius:0,background:"lightgrey",color:"black"},"&.other":{borderTopLeftRadius:0,background:"linear-gradient(130deg, rgba(39,31,208,1) 0%, rgba(32,167,253,1) 75%, rgba(106,194,255,1) 100%)",color:"white"}},image:{borderRadius:10,display:"block",objectFit:"contain",marginLeft:"auto",marginRight:"auto",outline:"none"}}})),ct=n(351),it=Object(r.memo)((function(e){var t=ot(),n=e.sender,a=e.date,r=e.text,c=e.myMessage,i=e.image,l=e.handleModalOpen,s=new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return n?o.a.createElement("div",{className:t.root},o.a.createElement("div",{className:"".concat(t.messageView," ").concat(c?"my":"other")},!c&&o.a.createElement(j.a,{variant:"circle",alt:"Remy Sharp",src:n.pictureUrl?n.pictureUrl.url:C.a}),o.a.createElement("div",{className:t.messageInfo},o.a.createElement(p.a,{variant:"body2",className:"".concat(t.messageDetails," ").concat(c?"my":"other")},n.language&&!c&&o.a.createElement("img",{alt:n.language,src:"https://unpkg.com/language-icons/icons/".concat(ct.a.getCode(n.language),".svg"),width:"20px",height:"20px",style:{borderRadius:"10px",marginRight:"5px"}}),c?"":n.name," ",s),o.a.createElement(p.a,{variant:"body1",className:"".concat(t.messageText," ").concat(c?"my":"other")},null!==i&&o.a.createElement(g.a,{onClick:function(){return l(i.url)},style:{display:"block"}},o.a.createElement("img",{src:i.url,alt:"userpicture",width:"150px",height:"150px",className:t.image})),void 0!==r&&r)))):null})),lt=(n(499),Object(i.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},image:{display:"block",maxWidth:"50%",maxHeight:"80%",outline:"none",objectFit:"contain"}}}))),st=n(568),ut=n(543),mt=n(541),dt=function(e){var t=e.open,n=e.src,a=e.handleModalClose,r=lt();return o.a.createElement(st.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"user-image",className:r.modal,open:t,onClose:a,closeAfterTransition:!0,BackdropComponent:ut.a,BackdropProps:{timeout:500}},o.a.createElement(mt.a,{in:t},o.a.createElement("img",{src:n&&n,alt:"userpicture",className:r.image})))},pt=function(){var e=Object(d.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_TRANSLATE_URL,"/v2?target=").concat(n,"&key=").concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_KEY,"&q=").concat(t));case 3:return a=e.sent,e.abrupt("return",a.data.data.translations[0].translatedText);case 7:throw e.prev=7,e.t0=e.catch(0),Error("Oops, failed to translate");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),ft=function(e,t,n){return new Promise(function(){var a=Object(d.a)(m.a.mark((function a(r,o){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,pt(n,ct.a.getCode(t));case 3:e.textVersions[t]=a.sent,r(e),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),o(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}())},gt=function(){var e=Object(d.a)(m.a.mark((function e(t,n,a,r,o){var c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c={sender:a.email,date:t,textVersions:{}},o&&(c.image=o),!n){e.next=8;break}if(c.textVersions[a.language]=n,!r){e.next=8;break}return i=r.map(function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===a.language){e.next=2;break}return e.abrupt("return",ft(c,t,n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,Promise.all(i);case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),bt=n(284),ht=n.n(bt),Ot=function(e){var t=e.imageUrl,n=e.handleClose;return o.a.createElement("div",{style:{borderRadius:10,marginRight:10}},o.a.createElement(g.a,{style:{position:"absolute",top:-5,left:60},onClick:n},o.a.createElement(ht.a,null)),o.a.createElement("img",{src:t.url,alt:"userpicture",width:"50px",height:"50px",style:{borderRadius:10,display:"block",outline:"none"}}))},vt=Object(S.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return o.a.createElement(b.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"}},e))})),Et=n(510),jt=n(500),yt=n.n(jt),Ct=function(e){var t=e.conversation,n=e.setMessage,c=e.message,i=Object(r.useState)(null),l=Object(a.a)(i,2),s=l[0],u=l[1],m=function(){u(null)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{title:"Choose an emoji",placement:"top",arrow:!0},o.a.createElement("span",null,o.a.createElement(g.a,{"aria-controls":"customized-menu","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},disabled:!t,style:{marginRight:15}},o.a.createElement(yt.a,null)))),o.a.createElement(vt,{id:"customized-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:m},o.a.createElement(Et.a,{set:"google",title:"Peppermint chat",onSelect:function(e){return n(c.concat(e.native))},emojiSize:20,onClick:m})))},xt=n(501),St=n.n(xt),wt=function(e){var t=e.handleImageSelector,n=e.conversation,a=e.imageEl,r=e.handleImageSave,c=e.handleClose;return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{title:"Add photos",placement:"top",arrow:!0},o.a.createElement("span",null,o.a.createElement(g.a,{"aria-label":"select image",onClick:t,disabled:!n},o.a.createElement(St.a,null)))),o.a.createElement(v.a,{open:Boolean(a),onSave:r,showPreviews:!0,maxFileSize:3e6,onClose:c}))},kt=Object(r.memo)((function(e){var t,n,c=e.user,i=rt(),l=Object(F.k)(),s=Object(G.d)(),u=Object(F.l)(),p=u.contacts,f=u.unknownUsers,g=Object(r.useContext)(ie),b=Object(r.useContext)(le),h=Object(r.useState)([]),O=Object(a.a)(h,2),v=O[0],E=O[1],j=Object(r.useState)(""),y=Object(a.a)(j,2),C=y[0],x=y[1],S=Object(r.useState)({}),w=Object(a.a)(S,2),k=w[0],_=w[1],T=Object(r.useState)(""),R=Object(a.a)(T,2),P=R[0],I=R[1],A=Object(r.useRef)(null),W=Object(r.useState)([]),B=Object(a.a)(W,2),L=B[0],U=B[1],K=Object(r.useState)(null),V=Object(a.a)(K,2),M=V[0],Y=V[1],$=Object(r.useState)(null),q=Object(a.a)($,2),Q=q[0],X=q[1],Z=Object(r.useState)(!1),ee=Object(a.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(r.useState)(null),re=Object(a.a)(ae,2),oe=re[0],ce=re[1],se=function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(null),e.next=3,H(t[0],null,c.email);case 3:n=e.sent,X(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(Q.name);case 2:X(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(e){ce(e),ne(!0)},de=function(){ne(!1),ce(null)},pe=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_URL,"/user/").concat(c.email,"/conversation/").concat(g.conversation,"/newMessage"),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(d.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t=(new Date).toISOString(),(C||Q)&&gt(t,C,c,P,Q).then((function(e){J.a.emit("message",e,g.conversation,(function(){pe(e),x(""),X(null),ge(),0===v.length&&Object(G.b)(c.email,s)}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){A.current.scrollIntoView({behavior:"smooth"})};return Object(r.useEffect)((function(){ge()}),[v]),Object(r.useEffect)((function(){_(Object(N.a)(Object(N.a)({},p),f))}),[p,f]),Object(r.useEffect)((function(){J.a.emit("join",{email:c.email,room:g.conversation},(function(e){e&&alert(e)}))}),[g.conversation,c.email]),Object(r.useEffect)((function(){return E([]),J.a.on("onlineUsers",(function(e){Object(F.j)(e,p,l)})),J.a.on("message",(function(e){E((function(t){return[].concat(Object(Ie.a)(t),[e])})),Object(G.b)(c.email,s)})),void 0!==g.conversation&&function(e,t,n,a,r,o,c){D.a.get("/user/conversation/".concat(t)).then((function(t){n(t.data.conversation.messages),a(t.data.conversation.users),t.data.conversation.users.forEach((function(t){r[t]||t===e||D.a.get("/api/user/".concat(t)).then((function(e){Object(F.b)(t,o,c)})).catch((function(e){return console.log(e)}))}))})).catch((function(e){return console.error(e)}))}(c.email,g.conversation,E,U,k,f,l),function(){J.a.emit("disconnect"),J.a.off()}}),[g.conversation,c,f,l,k,s,p]),Object(r.useEffect)((function(){L.length>0&&D.a.get("/api/user/".concat(L.join(","),"/languages")).then((function(e){I(e.data.languages)})).catch((function(e){return console.log(e)}))}),[L,k]),o.a.createElement("div",{className:i.root},o.a.createElement("div",{className:i.messegesView},!!v.length>0&&v.map((function(e,t){return e&&(e.textVersions||e.image)?(n=k?k[e.sender]:void 0,o.a.createElement("div",{key:t},o.a.createElement(it,{sender:e.sender===c.email?c:n,contactsContext:!0,date:e.date,text:e.textVersions?b.original?e.textVersions[Object.keys(e.textVersions)[0]]:e.textVersions[c.language]:null,myMessage:e.sender===c.email,image:e.image?e.image:null,handleModalOpen:me,handleModalClose:de}))):null})),o.a.createElement("div",{ref:A})),o.a.createElement(dt,{open:te,handleModalClose:de,src:oe&&oe}),o.a.createElement(be.a,{className:i.messageInput,autoFocus:!0,variant:"outlined",placeholder:"message...",value:C,onChange:function(e){return x(e.target.value)},onKeyPress:function(e){return function(e){return"Enter"===e.key?fe(e):null}(e)},autoComplete:"off",fullWidth:!0,disabled:!g.conversation,InputProps:{startAdornment:o.a.createElement(he.a,{position:"start"},null!==Q&&o.a.createElement(Ot,{imageUrl:Q,handleClose:ue})),endAdornment:o.a.createElement(he.a,{position:"end"},o.a.createElement(Ct,{conversation:g.conversation,setMessage:x,message:C}),o.a.createElement(wt,{handleImageSelector:function(e){Y(e.currentTarget)},conversation:g.conversation,imageEl:M,handleImageSave:se,handleClose:function(){Y(null)}}))}}))})),_t=function(){var e=Object(M.e)().user,t=Ze();return o.a.createElement("section",{className:t.root},o.a.createElement(at,null),!!e&&o.a.createElement(kt,{user:e}))};t.default=function(){var e=l(),t=Object(r.useState)(),n=Object(a.a)(t,2),c=n[0],i=n[1],s=Object(r.useState)(!1),u=Object(a.a)(s,2),m=u[0],d=u[1];return o.a.createElement("main",{className:e.root},o.a.createElement(ie.Provider,{value:{conversation:c,setConversation:i}},o.a.createElement(le.Provider,{value:{original:m,setOriginal:d}},o.a.createElement(Xe,null),o.a.createElement(_t,null))))}}}]);
//# sourceMappingURL=6.7c946686.chunk.js.map