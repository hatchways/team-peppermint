(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{198:function(e,t,n){},201:function(e,t,n){},266:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(14),r=n.n(c),i=(n(198),n(92)),o=n(16),s=n(175),l=Object(s.a)({typography:{fontFamily:'"Poppins", sans-serif',fontSize:16,h1:{},caption:{}},palette:{primary:{main:"#3A8DFF"}}}),u=n(325),d=n(326),j=n(327),b=(n(201),n(9)),g=n(63),h=n(13),O={SET_CONVERSATIONS:"SET_CONVERSATIONS",SET_MESSAGES:"SET_MESSAGES",SET_CURRENT_CONVERSATION:"SET_CURRENT_CONVERSATION",PUSH_MESSAGE:"PUSH_MESSAGE",SET_SOCKET:"SET_SOCKET",UPDATE_USER_IMAGE:"UPDATE_USER_IMAGE",SET_USER_DATA:"SET_USER_DATA",SET_CONTACTS:"RESET_LISTS",FETCH_CONVERSATIONS:"FETCH_CONVERSATIONS",UPDATE_CONVERSATIONS:"UPDATE_CONVERSATIONS",ADD_CONVERSATION:"RESET_CONVERSATIONS",ADD_CONTACT:"ADD_CONTACT"},f=function(e,t){return{type:e,payload:t}},p=function(e,t){switch(t.type){case O.SET_USER_DATA:return Object(b.a)(Object(b.a)({},e),t.payload);case O.UPDATE_USER_IMAGE:return Object(b.a)(Object(b.a)({},e),{},{user:Object(b.a)(Object(b.a)({},e.user),{},{pictureURL:{url:t.payload.imageUrl}})});case O.SET_SOCKET:return Object(b.a)(Object(b.a)({},e),{},{socket:t.payload});default:return e}},m=n(31),x=n.n(m),v={"Content-Type":"application/json"},y={login:function(e){return x()("/api/user/login",{method:"POST",data:e,headers:v})},register:function(e){return x()("/api/user/",{method:"POST",data:e,headers:v})},logout:function(){return x.a.get("/api/user/logout")},isAuthenticated:function(){return x.a.get("/api/user/authenticated").then((function(e){return 401!==e.status?e:{isAuthenticated:!1,user:{email:"",name:"",role:""}}}))},getUserConversations:function(){return x.a.get("/api/user/conversations")},getUserContacts:function(){return x.a.get("/api/user/contacts")},searchUsersByEmailOrName:function(e){return x.a.get("/api/user?searchTerm=".concat(e))},addContact:function(e){return x()("/api/user/contacts",{method:"POST",data:{contactID:e},headers:v})}},S=n(149),C=n.n(S),w=n(2),E=Object(a.createContext)(),T=Object(a.createContext)(),N={isAuthenticated:!1,isLoaded:!1,user:{_id:"",name:"",email:"",language:"",pictureURL:{url:""}},socket:null},_=function(e){var t=e.children,n=Object(a.useReducer)(p,N),c=Object(h.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){y.isAuthenticated().then((function(e){i(f(O.SET_USER_DATA,e.data))})).catch((function(e){return console.error(e.message)}))}),[]),Object(a.useEffect)((function(){return r.isAuthenticated&&!r.socket&&i(f(O.SET_SOCKET,C()({query:{userID:r.user._id}}))),function(){var e;return null===(e=r.socket)||void 0===e?void 0:e.disconnect}}),[r]),Object(w.jsxs)(E.Provider,{value:r,children:[Object(w.jsx)(T.Provider,{value:i,children:t})," "]})},A=function(){return Object(a.useContext)(E)},k=function(e){var t=e.component,n=(e.roles,Object(g.a)(e,["component","roles"])),a=A().isAuthenticated;return Object(w.jsx)(o.b,Object(b.a)(Object(b.a)({},n),{},{render:function(e){return a?Object(w.jsx)(t,Object(b.a)({},e)):Object(w.jsx)(o.a,{to:{pathname:"/",state:{from:e.location}}})}}))},R=function(e){var t=e.component,n=Object(g.a)(e,["component"]),a=A().isAuthenticated;return Object(w.jsx)(o.b,Object(b.a)(Object(b.a)({},n),{},{render:function(e){return a?Object(w.jsx)(o.a,{to:{pathname:"/home",state:{from:e.location}}}):Object(w.jsx)(t,Object(b.a)({},e))}}))},I=n(317),D=n(23),U=n(306),P=n.p+"static/media/login-signup-bgImage.0c5628a9.png",L=n(151),M=n.n(L),V=n(152),B=n.n(V),F=Object(U.a)(Object(D.a)({imageContainer:{backgroundImage:"url(".concat(P,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100vh",width:"40vw",marginRight:20},gradientContainer:{backgroundImage:"linear-gradient(#3a8cffca, #86b8ffc9)",height:"100vh",width:"40vw",display:"grid",justifyItems:"center",alignItems:"center"},iconStyle:{fontSize:70,color:"rgba(255, 255, 255, 0.80)"},textStyle:{color:"rgba(255, 255, 255, 0.95)",fontWeight:"200",fontSize:40,width:"70%",textAlign:"center",marginBottom:-80,marginTop:-80}},"@media (max-width:560px)",{imageContainer:{height:"20vh",width:"100vw"},gradientContainer:{height:"20vh",width:"100vw"},textStyle:{fontSize:25}}));function G(){var e=F();return Object(w.jsx)("div",{className:e.imageContainer,children:Object(w.jsxs)("div",{className:e.gradientContainer,children:[Object(w.jsx)(M.a,{className:e.iconStyle}),Object(w.jsx)("h3",{className:e.textStyle,children:"Converse with anyone with any language"}),Object(w.jsx)(B.a,{className:e.iconStyle})]})})}var H=n(179),W=n(330),z=n(314),K=n(18),Q=function(e){var t=e.renderRegister,n=Object(a.useContext)(T),c=Object(a.useState)(null),r=Object(h.a)(c,2),i=r[0],o=r[1];return Object(w.jsxs)("div",{children:[Object(w.jsx)(K.c,{initialValues:{email:"",password:""},onSubmit:function(e){y.login(e).then((function(e){n(f(O.SET_USER_DATA,e.data))})).catch((function(e){return o(e)}))},children:function(e){e.values;return Object(w.jsxs)(K.b,{children:[Object(w.jsx)(H.a,{variant:"h1",children:"LOGIN"}),Object(w.jsx)(K.a,{name:"email",type:"email",label:"Email",as:W.a}),Object(w.jsx)(K.a,{name:"password",type:"password",label:"Password",as:W.a}),Object(w.jsxs)("div",{children:[Object(w.jsx)(z.a,{children:"Forgot Password?"}),Object(w.jsx)(z.a,{onClick:t,children:"Don't have an account yet?"})]}),Object(w.jsx)(z.a,{type:"submit",variant:"contained",color:"primary",children:Object(w.jsx)(H.a,{variant:"h3",children:"Login"})})]})}}),i&&Object(w.jsxs)("div",{children:[" ",i]})]})},$=n(331),q=n(315),J=n(316),X=function(e){var t=e.history,n=e.renderLogin,c=A(),r=Object(a.useState)(null),i=Object(h.a)(r,2),o=i[0],s=i[1];return Object(a.useEffect)((function(){console.log(c)}),[c]),Object(w.jsxs)("div",{children:[Object(w.jsx)(K.c,{initialValues:{email:"",password:"",confirmPassword:"",name:"",language:"english"},onSubmit:function(e){y.register(e).then((function(e){console.log(e),"error"!==e.status?t.push("/home"):s(e.message)})).catch((function(e){return console.log(e)}))},children:function(e){e.values;return Object(w.jsxs)(K.b,{children:[Object(w.jsx)(H.a,{variant:"h1",children:"REGISTRATION"}),Object(w.jsx)(K.a,{name:"email",type:"email",label:"Email",as:W.a}),Object(w.jsx)(K.a,{name:"name",type:"text",label:"Name",as:W.a}),Object(w.jsx)(K.a,{name:"password",type:"password",label:"Password",as:W.a}),Object(w.jsx)(K.a,{name:"confirmPassword",type:"password",label:"Confirm Password",as:W.a}),Object(w.jsxs)(K.a,{name:"language",as:$.a,children:[Object(w.jsx)(q.a,{value:"english",children:"English"}),Object(w.jsx)(q.a,{value:"french",children:"French"}),Object(w.jsx)(q.a,{value:"chinese",children:"Chinese"}),Object(w.jsx)(q.a,{value:"russian",children:"Russian"})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(J.a,{children:"Forgot Password?"}),Object(w.jsx)(J.a,{onClick:n,children:"Don't have an account yet?"})]}),Object(w.jsx)(z.a,{type:"submit",variant:"contained",color:"primary",children:Object(w.jsx)(H.a,{variant:"h3",children:"Register"})})]})}}),o&&Object(w.jsxs)("div",{children:[" ",o]})]})},Y=function(e){var t=e.history,n=Object(a.useState)(!0),c=Object(h.a)(n,2),r=c[0],i=c[1];return Object(w.jsxs)(I.a,{container:!0,justify:"space-between",children:[Object(w.jsx)(I.a,{item:!0,xs:6,children:Object(w.jsx)(G,{})}),Object(w.jsx)(I.a,{item:!0,xs:6,children:r?Object(w.jsx)(Q,{history:t,renderRegister:function(){return i(!1)}}):Object(w.jsx)(X,{history:t,renderLogin:function(){return i(!0)}})})]})},Z=Object(U.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",width:"35%",height:"100%",backgroundColor:"#f5f7fb"}}})),ee=n(40),te=n.n(ee),ne=n(62),ae=n(335),ce=n(104),re=n(176),ie=Object(U.a)((function(e){return Object(D.a)({root:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",minHeight:"10vh",backgroundColor:"transparent"},leftRightSideStyle:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(2)},badge:{top:63,right:5},typography:{fontWeight:600,textAlign:"center"},logoutStyle:{color:"black",textDecoration:"none"}},"@media (max-width:400px)",{root:{padding:e.spacing(2)},leftRightSideStyle:{flexDirection:"column",height:"10vh",padding:0},typography:{fontSize:"1.3rem"}})})),oe=n(174),se=n(320),le=n(334),ue=n.p+"static/media/avatar.c2a95cb3.png",de=n(319),je=n(6),be=(Object(je.a)((function(e){return{badge:{backgroundColor:"#D3D3D3",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),width:e.spacing(1.4),height:e.spacing(1.4),borderRadius:"50%",top:e.spacing(5),right:e.spacing(.5)}}}))(de.a),Object(je.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),width:e.spacing(1.1),height:e.spacing(1.1),borderRadius:"50%",top:e.spacing(5),right:e.spacing(.5),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(de.a),Object(U.a)((function(e){return Object(D.a)({root:{display:"flex","& > *":{margin:e.spacing(1),marginRight:e.spacing(3)}},avatar:{width:e.spacing(6.5),height:e.spacing(6.5)}},"@media (max-width:400px)",{root:{"& > *":{marginRight:e.spacing(1)}}})}))),ge=Object(U.a)((function(e){return{badge:function(t){return{backgroundColor:t.isOnline?"#44b700":"#D3D3D3",boxShadow:"0 0 0 2px #FFF",height:e.spacing(1.2),width:e.spacing(1.2),borderRadius:"50%",marginBottom:e.spacing(1),marginRight:e.spacing(1)}}}})),he=function(e){var t=e.children,n=e.isOnline,a=ge({isOnline:n});return Object(w.jsx)(de.a,{classes:{badge:a.badge},badgeContent:"",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:t})},Oe=function(e){var t=e.imageUrl,n=e.isOnline,a=be({isOnline:n}),c="";return c=void 0!==t&&void 0!==t.url&&t.url.includes("http")?t.url:ue,Object(w.jsx)("div",{className:a.root,children:Object(w.jsx)(he,{isOnline:n,children:Object(w.jsx)(le.a,{variant:"circular",alt:"Badge",src:c,className:a.avatar})})})},fe=function(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),i=Object(h.a)(r,2),o=i[0],s=i[1],l=A().user,u=ie(),d=function(){s(null)},j=function(){var e=Object(ne.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:u.root,children:[Object(w.jsxs)("div",{className:u.leftRightSideStyle,children:[Object(w.jsx)(Oe,{imageUrl:l.pictureURL}),Object(w.jsx)(H.a,{variant:"body2",className:u.typography,children:l.name})]}),Object(w.jsxs)("div",{className:u.leftRightSideStyle,children:[Object(w.jsx)(ae.a,{title:"More actions",placement:"bottom",arrow:!0,children:Object(w.jsx)(ce.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},style:{marginLeft:20},children:Object(w.jsx)(se.a,{})})}),Object(w.jsxs)(re.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:d,children:[Object(w.jsx)(q.a,{onClick:function(){return c(!0)},children:"Replace picture"}),Object(w.jsx)(q.a,{onClick:function(){y.logout().then((function(e){return console.log(e)})).catch((function(e){return console.error(e)}))},children:"Log out"})]}),Object(w.jsx)(oe.a,{open:n,onSave:j,showPreviews:!0,maxFileSize:2e6,onClose:function(){c(!1),d()}})]})]})},pe=Object(U.a)((function(e){return Object(D.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,width:"100%",height:"100%",backgroundColor:"transparent",overflow:"hidden"},tabs:{backgroundColor:"#f5f7fb",borderColor:"none"},tabPanel:{width:"100%",height:"100%"},search:Object(D.a)({display:"flex",justifyContent:"center",borderRadius:e.shape.borderRadius,backgroundColor:"#e9eef9",marginTop:e.spacing(2),marginBottom:e.spacing(2),minWidth:"100%",height:e.spacing(7)},e.breakpoints.up("sm"),{width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},clearIcon:{padding:e.spacing(0,2),height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},debounceInput:{border:"none",height:"100%",width:"70%",backgroundColor:"transparent",fontSize:"1.3rem",right:0,outline:"none"},collapse:{textAlign:"center",marginBottom:e.spacing(1),width:"100%"},alert:{display:"flex",alignItems:"center",justifyContent:"center"}},"@media (max-width:400px)",{tabs:{display:"flex",alignItems:"center",justifyContent:"center"}})})),me=n(328),xe=n(322),ve=n(329),ye=n(323),Se=Object(U.a)((function(e){return{root:{padding:0,maxHeight:"65vh",flexGrow:1,overflow:"auto",backgroundColor:"transparent","-ms-overflow-style":"none","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}}})),Ce=Object(U.a)((function(e){return Object(D.a)({root:{display:"flex",alignItems:"center",padding:e.spacing(2),marginBottom:e.spacing(1),width:"100%",backgroundColor:"#f9fafc",boxShadow:"0 0 1px 0 grey"},avatarNameContainer:{display:"flex",alignItems:"center",width:"75%",height:"100%"},nameContainer:{display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"center"},chip:{display:"block",marginLeft:e.spacing(1),marginRight:e.spacing(1)}},"@media (max-width:360px)",{avatarNameContainer:{flexDirection:"column",justifyContent:"center"}})})),we=n(270),Ee=Object(a.createContext)(),Te=function(e,t,n){return e?t?Object.values(e.textVersions)[0]:e.textVersions[n]||Object.values(e.textVersions)[0]:""},Ne=function(){return Object(a.useContext)(Ee)},_e=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(h.a)(n,2),r=c[0],i=c[1],o=Object(a.useCallback)((function(){i(!r)}),[r]);return Object(w.jsx)(Ee.Provider,{value:{isOriginalLanguage:r,toggleOrginalLanguage:o},children:t})},Ae={"Content-Type":"application/json"},ke={sendMessage:function(e,t){return x()("/api/conversations/".concat(e,"/message"),{method:"POST",data:t,headers:Ae})},fetchConversationById:function(e){return x.a.get("/api/conversations/".concat(e))}},Re=n(101),Ie=function(e,t){switch(t.type){case O.SET_CURRENT_CONVERSATION:return Object(b.a)(Object(b.a)({},e),t.payload);case O.SET_MESSAGES:return Object(b.a)(Object(b.a)({},e),{},{messages:t.payload});case O.PUSH_MESSAGE:return Object(b.a)(Object(b.a)({},e),{},{messages:[].concat(Object(Re.a)(e.messages),[t.payload])});default:return e}},De=Object(a.createContext)(),Ue=Object(a.createContext)(),Pe={_id:"",conversationID:"",conversationTitle:"",users:"",messages:[],lastMessage:""},Le=function(){return Object(a.useContext)(De)},Me=function(){return Object(a.useContext)(Ue)},Ve=function(e){var t=e.children,n=Object(a.useReducer)(Ie,Pe),c=Object(h.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){""!==r._id&&ke.fetchConversationById(r._id).then((function(e){i(f(O.SET_MESSAGES,e.data.conversation.messages))})).catch((function(e){return console.log(e)}))}),[r._id]),Object(w.jsx)(De.Provider,{value:r,children:Object(w.jsx)(Ue.Provider,{value:i,children:t})})},Be=function(e){var t=e.conversation,n=(e.index,e.selected,Ce()),c=A(),r=c.user,i=c.socket,o=t._id,s=t.users,l=t.conversationTitle,u=t.lastMessage,d=Ne().isOriginalLanguage,j=Object(a.useState)(u),b=Object(h.a)(j,2),g=b[0],p=b[1],m=Le(),x=Me(),v=s.length>2,y=s.filter((function(e){return e._id!==r._id})),S=v?l||"Group Chat":y[0].name;return Object(a.useEffect)((function(){return i.on("".concat(t._id,"-message"),(function(e){p(e),m._id===o&&x(f(O.PUSH_MESSAGE,e))})),function(){return i.off("".concat(t._id,"-message"))}}),[]),Object(w.jsx)(we.a,{button:!0,className:n.root,onClick:function(){x(f(O.SET_CURRENT_CONVERSATION,t))},selected:(null===m||void 0===m?void 0:m._id)===o,children:Object(w.jsxs)("div",{className:n.avatarNameContainer,children:[1===s.length&&Object(w.jsx)(Oe,{imageUrl:""}),Object(w.jsxs)("div",{className:n.nameContainer,children:[Object(w.jsx)(H.a,{variant:"body1",gutterBottom:!0,children:S}),Object(w.jsx)(H.a,{variant:"body2",gutterBottom:!0,children:Te(g,d,r.language)})]})]})})},Fe=n(313),Ge=function(e,t){switch(t.type){case O.SET_CONVERSATIONS:case O.ADD_CONVERSATION:return Object(b.a)(Object(b.a)({},e),{},{conversations:t.payload});default:return e}},He=Object(a.createContext)(),We=Object(a.createContext)(),ze={conversations:[]},Ke=function(){return Object(a.useContext)(He)},Qe=function(e){var t=e.children,n=Object(a.useReducer)(Ge,ze),c=Object(h.a)(n,2),r=c[0],i=c[1],o=A().isAuthenticated;return Object(a.useEffect)((function(){o&&y.getUserConversations().then((function(e){i(f(O.SET_CONVERSATIONS,e.data.conversations))})).catch((function(e){return console.log(e)}))}),[o]),Object(w.jsx)(He.Provider,{value:r,children:Object(w.jsx)(We.Provider,{value:i,children:t})})},$e=function(){var e=Se(),t=Ke().conversations;return Object(w.jsx)(Fe.a,{className:e.root,children:t.length>0?t.map((function(e,t){return Object(w.jsx)(Be,{conversation:e,index:t},t)})):Object(w.jsx)(H.a,{variant:"body1",color:"primary",gutterBottom:!0,style:{color:"black",textAlign:"center"},children:"No group chats"})})},qe=Object(U.a)((function(e){return{root:{padding:0},buttonsContainer:{display:"flex",flexDirection:"column"}}})),Je=n(321),Xe=Object(U.a)((function(e){return Object(D.a)({root:{display:"flex",alignItems:"center",width:"100%"},contactButton:{width:"100%",justifyContent:"start","&:focus":{outline:"none"}},avatarNameContainer:{display:"flex",alignItems:"center",width:"50%",height:"100%"},chip:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},buttonBase:{marginLeft:20,marginRight:20,padding:10,borderRadius:"50%"},contactName:{marginBottom:0,fontWeight:600}},"@media (max-width:400px)",{avatarNameContainer:{flexDirection:"column",justifyContent:"center"},contactName:{fontSize:"1.3rem"}})})),Ye=n(165),Ze=n.n(Ye),et=n(318),tt=n(166),nt=n.n(tt),at=function(e,t){switch(t.type){case O.SET_CONTACTS:return Object(b.a)(Object(b.a)({},e),{},{contacts:t.payload});case O.ADD_CONTACT:return Object(b.a)(Object(b.a)({},e),{},{contacts:[].concat(Object(Re.a)(e.contacts),[t.payload])});case O.UPDATE_CONTACT_STATUS:var n=e.contacts.indexOf(t.payload.contact);return e.contacts[n].isOnline=t.payload.status,Object(b.a)({},e);default:return e}},ct=Object(a.createContext)(),rt=Object(a.createContext)(),it={contacts:[]},ot=function(e){var t=e.children,n=Object(a.useReducer)(at,it),c=Object(h.a)(n,2),r=c[0],i=c[1],o=A().isAuthenticated;return Object(a.useEffect)((function(){o&&y.getUserContacts().then((function(e){return i(f(O.SET_CONTACTS,e.data.contacts))})).catch((function(e){return console.error(e)}))}),[o]),Object(w.jsx)(ct.Provider,{value:r,children:Object(w.jsx)(rt.Provider,{value:i,children:t})})},st=function(e){var t=e.contact,n=e.unknown,c=e.removeFromUknown,r=Xe(),i=Ke().conversations,o=A(),s=o.user,l=o.socket,u=t.name,d=t.isOnline,j=Object(a.useContext)(rt),b=Object(a.useContext)(We),g=Le(),h=Me(),p=Ze()([s._id,t._id].sort().join());return Object(a.useEffect)((function(){var e=function(e){j(f(O.UPDATE_CONTACT_STATUS,{contact:t,status:e}))};return l.on("".concat(t._id,"-login"),(function(t){var a=t.isOnline;n||e(a)})),l.on("".concat(t._id,"-logout"),(function(t){var a=t.isOnline;n||e(a)})),function(){l.off("".concat(t._id,"-login")),l.off("".concat(t._id,"-logout "))}}),[l,n,t,j]),Object(w.jsxs)(we.a,{className:r.root,selected:g.conversationID===p&&null===g.conversationTitle,children:[Object(w.jsxs)(ce.a,{className:r.contactButton,disabled:n,onClick:function(){var e=i.find((function(e){return e.conversationID===p&&null===e.conversationTitle}));h(f(O.SET_CURRENT_CONVERSATION,e))},children:[Object(w.jsx)(Oe,{isOnline:d}),Object(w.jsx)(H.a,{variant:"h6",children:u})]}),n&&Object(w.jsx)(et.a,{onClick:function(){y.addContact(t._id).then((function(e){j(f(O.ADD_CONTACT,e.data.newContact)),e.data.newConversation&&b(f(O.ADD_CONVERSATION,e.data.newConversation)),c(t)})).catch((function(e){return console.log(e)}))},children:Object(w.jsx)(nt.a,{color:"primary"})})]})},lt=n(180),ut=n(168),dt=n.n(ut),jt=n(167),bt=n.n(jt),gt=Object(U.a)((function(e){return{root:{display:"flex",width:"90%",margin:"auto",padding:e.spacing(1,2),alignItems:"center",justifyContent:"space-between"},searchBar:{display:"flex",flexDirection:"row"},toggleButton:{height:"90%",padding:e.spacing(0,1),margin:"auto"},toggleButtonSelected:{color:e.palette.success.main}}})),ht=function(e){var t,n=e.contacts,c=e.updateContactList,r=e.updateUnknownList,i=gt(),o=Object(a.useState)(!0),s=Object(h.a)(o,2),l=s[0],u=s[1],d=function(e){if(l)y.searchUsersByEmailOrName(e.toLowerCase()).then((function(e){return r(e.data.users)})).catch((function(e){return console.log(e)}));else{var t=n.filter((function(t){return t.name.toLowerCase().startsWith(e.toLowerCase())||t.email.toLowerCase().startsWith(e.toLowerCase())}));c(t)}};return Object(w.jsxs)("div",{className:i.root,children:[Object(w.jsx)(et.a,{onClick:function(){return u(!l)},children:Object(w.jsx)(bt.a,{color:l?"primary":"disabled"})}),Object(w.jsx)(K.c,{initialValues:{searchQuery:""},onSubmit:d,children:function(e){e.values;var a=e.setFieldValue;return Object(w.jsx)(K.b,{className:i.searchBar,children:Object(w.jsx)(K.a,{className:i.seachTextField,name:"searchQuery",type:"text",placeholder:"Search Contact",as:lt.a,onChange:function(e){return function(e,a){a("searchQuery",e),t&&clearTimeout(t),e.length>=3&&(t=setTimeout((function(){return d(e)}),700)),""===e&&(c(n),r([]))}(e.target.value,a)},endAdornment:Object(w.jsx)(dt.a,{color:"disabled"})})})}})]})},Ot=function(){var e=qe(),t=Object(a.useContext)(ct).contacts,n=Object(a.useState)(t),c=Object(h.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)([]),s=Object(h.a)(o,2),l=s[0],u=s[1],d=function(e){u((function(t){var n=t;return n.splice(t.indexOf(e)),n}))};return Object(a.useEffect)((function(){console.log(l)}),[l]),Object(a.useEffect)((function(){i(t)}),[t]),Object(w.jsxs)("div",{className:e.root,children:[Object(w.jsx)(ht,{contacts:t,updateContactList:i,updateUnknownList:u}),l.map((function(e,t){return Object(w.jsx)(st,{contact:e,unknown:!0,removeFromUknown:d},t)})),Object(w.jsx)(Je.a,{variant:"middle"}),r.map((function(e,t){return Object(w.jsx)(st,{contact:e},t)}))]})};function ft(e){var t=e.children,n=e.value,a=e.index,c=Object(g.a)(e,["children","value","index"]);return Object(w.jsx)("div",Object(b.a)(Object(b.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},c),{},{children:n===a&&Object(w.jsx)(me.a,{children:t})}))}function pt(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var mt=function(){var e=pe(),t=Object(a.useState)(0),n=Object(h.a)(t,2),c=n[0],r=n[1];return Object(w.jsxs)("div",{className:e.root,children:[Object(w.jsx)(xe.a,{position:"static",style:{color:"black",maxWidth:"100%",backgroundColor:"#f5f7fb",boxShadow:"none"},children:Object(w.jsxs)(ve.a,{value:c,onChange:function(e,t){r(t)},"aria-label":"simple tabs example",variant:"fullWidth",children:[Object(w.jsx)(ye.a,Object(b.a)(Object(b.a)({label:"Chats"},pt(0)),{},{style:{minWidth:"50%",outline:"none"}})),Object(w.jsx)(ye.a,Object(b.a)(Object(b.a)({label:"Contacts"},pt(1)),{},{style:{minWidth:"50%",outline:"none"}}))]})}),Object(w.jsx)(ft,{value:c,index:0,className:e.tabPanel,children:Object(w.jsx)($e,{})}),Object(w.jsx)(ft,{value:c,index:1,className:e.tabPanel,children:Object(w.jsx)(Ot,{})})]})},xt=function(){var e=Z();return Object(w.jsxs)("div",{className:e.root,children:[Object(w.jsx)(fe,{}),Object(w.jsx)(mt,{})]})},vt=Object(U.a)((function(e){return{root:{width:"100%",padding:e.spacing(2),display:"flex",justifyContent:function(e){return e.isMyMessage?"flex-end":"flex-start"}},messageContianer:{minWidth:"12ch"},messageBox:{width:"100%",display:"flex",padding:10,borderRadius:10,borderBottomRightRadius:function(e){return e.isMyMessage&&0},borderTopLeftRadius:function(e){return!e.isMyMessage&&0},color:function(e){return e.isMyMessage?"black":"white"},background:function(e){return e.isMyMessage?"lightgrey":"linear-gradient(130deg, rgba(39,31,208,1) 0%, rgba(32,167,253,1) 75%, rgba(106,194,255,1) 100%)"}},messageDetails:{display:"flex",justifyContent:function(e){return e.isMyMessage?"end":"space-between"},alignItems:"center"},imageIcon:{width:"15%",borderRadius:e.spacing(2),marginRight:e.spacing(1)},image:{borderRadius:10,display:"block",objectFit:"contain",marginLeft:"auto",marginRight:"auto",outline:"none"}}})),yt=n(102),St=n(169),Ct=n.n(St),wt=function(e){var t,n=e.sender,a=e.createdAt,c=e.textVersions,r=e.isMyMessage,i=A().user,o=Ne().isOriginalLanguage,s=vt(e);return n?Object(w.jsxs)("div",{className:s.root,children:[!r&&Object(w.jsx)(Oe,{}),Object(w.jsxs)("div",{className:s.messageContianer,children:[Object(w.jsxs)("div",{className:s.messageDetails,children:[!r&&Object(w.jsxs)(H.a,{variant:"body2",children:[Object(w.jsx)("img",{className:s.imageIcon,alt:n.language,src:"https://unpkg.com/language-icons/icons/".concat(yt.a.getCode(n.language),".svg")}),n.name]}),Object(w.jsx)(H.a,{variant:"caption",children:(t=a,Ct()(t).format("HH:mm"))})]}),Object(w.jsx)("div",{className:s.messageBox,children:Te({textVersions:c},o,i.language)})]})]}):null},Et=n(324),Tt=Object(U.a)((function(e){return{root:{width:"100%",padding:10},textField:{width:"100%"}}})),Nt=n(170),_t=n.n(Nt),At=n(171),kt=n.n(At),Rt=function(e){var t=e.value,n=e.onSelect,c=Object(a.useState)(null),r=Object(h.a)(c,2),i=r[0],o=r[1];return Object(w.jsxs)("div",{children:[Object(w.jsx)(ce.a,{"aria-controls":"customized-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},children:Object(w.jsx)(kt.a,{})}),Object(w.jsx)(re.a,{id:"customized-menu",anchorEl:i,open:Boolean(i),onClose:function(){o(null)},children:Object(w.jsx)("div",{children:Object(w.jsx)(_t.a,{onEmojiClick:function(e,a){n("message",t+a.emoji)},groupNames:{smileys_people:"PEOPLE"},native:!0})})})]})},It=n(172),Dt=function(){var e=Object(ne.a)(te.a.mark((function e(t,n){var a,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=yt.a.getCode(n),console.log(a),e.next=5,x.a.post("".concat("https://translation.googleapis.com/language/translate","/v2?target=").concat(a,"&key=").concat("AIzaSyDL5IjPkVFkAjiFvkFxcIUOw1gAeBdXyLI","&q=").concat(t));case 5:return c=e.sent,e.abrupt("return",c.data.data.translations[0].translatedText);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Ut=n(173),Pt=n.n(Ut),Lt=function(){var e=Object(ne.a)(te.a.mark((function e(t,n,a){var c,r,i,o,s;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c={})[n.language]=a,r=Object(It.a)(t),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=14;break}if(o=i.value,n.language===o.language){e.next=12;break}return e.next=10,Dt(a,o.language);case 10:s=e.sent,c[o.language]=Pt()(s);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:return e.abrupt("return",c);case 23:case"end":return e.stop()}}),e,null,[[3,16,19,22]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Mt=function(){var e=Tt(),t=A(),n=t.user,a=t.socket,c=Le(),r={message:"",image:void 0},i=function(){var e=Object(ne.a)(te.a.mark((function e(t,r){var i,o,s,l;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.message,o=t.image,s=r.resetForm,!c._id){e.next=10;break}if(l={textVersions:{}},""===i){e.next=8;break}return e.next=7,Lt(c.users,n,i);case 7:l.textVersions=e.sent;case 8:o&&(l.image=o),ke.sendMessage(c._id,l).then((function(e){a.emit("new-message",Object(b.a)(Object(b.a)({},e.data.messageObject),{},{conversationID:c._id})),s()})).catch((function(e){return console.log(e)}));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:e.root,children:Object(w.jsx)(K.c,{initialValues:r,onSubmit:i,children:function(t){var n=t.values,a=t.setFieldValue;return Object(w.jsx)(K.b,{children:Object(w.jsx)(K.a,{className:e.textField,name:"message",type:"text",placeholder:"Send message...",variant:"outlined",InputProps:{endAdornment:Object(w.jsx)(Et.a,{children:Object(w.jsx)(Rt,{value:n.message,onSelect:a})})},as:W.a})})}})})},Vt=Object(U.a)((function(e){return{root:{maxHeight:"100%",height:"100%",width:"65%"},messagesContainer:{minHeight:"80%",maxHeight:"80%",overflowY:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}}})),Bt=n(336),Ft=Object(U.a)((function(e){return Object(D.a)({root:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",minHeight:"10%",backgroundColor:"#fff",boxShadow:" 0 15px 15px #f5f7fb"},leftRightSideStyle:{display:"flex",justifyContent:"center",alignItems:"center",padding:20},onOfflineStyle:{display:"flex",justifyContent:"space-between",alignItems:"center",width:50},typography:{fontSize:"0.9rem",fontWeight:600,color:"#3A8DFF"}},"@media (max-width:510px)",{root:{flexDirection:"column",justifyContent:"center",padding:10},leftRightSideStyle:{padding:0},typography:{fontSize:"1.3rem"}})})),Gt=(Object(je.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),width:e.spacing(1.1),height:e.spacing(1.1),borderRadius:"50%","&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(de.a),function(){var e=Ft(),t=Ne(),n=t.isOriginalLanguage,a=t.toggleOrginalLanguage;return Object(w.jsx)("div",{className:e.root,children:Object(w.jsxs)("div",{className:e.leftRightSideStyle,children:[n?Object(w.jsx)(H.a,{variant:"body2",className:e.typography,children:"Original language"}):Object(w.jsx)(H.a,{variant:"body2",className:e.typography,style:{color:"grey",opacity:.5},children:"Original language"}),Object(w.jsx)(Bt.a,{checked:n,onChange:function(){a(),console.log(n)},color:"primary",name:"checked",inputProps:{"aria-label":"secondary checkbox"}}),Object(w.jsx)(ce.a,{onClick:function(){return console.log("Clicked")},style:{marginLeft:20},children:Object(w.jsx)(se.a,{})})]})})}),Ht=function(){var e=A(),t=e.user,n=e.socket,c=Le(),r=c._id,i=c.messages,o=c.users,s=Me(),l=Vt(),u=Object(a.useRef)(),d=function(e){return o.find((function(t){return t._id===e}))};Object(a.useEffect)((function(){return u.current.scrollIntoView({behavior:"smooth"})}),[i]),Object(a.useEffect)((function(){return n.on("".concat(r,"-message"),(function(e){console.log("Message Pushed",r),s(f(O.PUSH_MESSAGE,e))})),function(){return n.off("".concat(r,"-message"))}}),[r]);return Object(w.jsxs)("div",{className:l.root,children:[Object(w.jsx)(Gt,{}),Object(w.jsxs)("div",{className:l.messagesContainer,children:[i.map((function(e,n){var a=e.sender,c=Object(g.a)(e,["sender"]);return Object(w.jsx)(wt,Object(b.a)(Object(b.a)({sender:d(a)},c),{},{isMyMessage:a===t._id}),n)})),Object(w.jsx)("div",{ref:u})]}),Object(w.jsx)(Mt,{})]})},Wt=Object(U.a)((function(e){return{root:{display:"flex",padding:0,height:"100vh",overflow:"hidden"},item:{maxHeight:"100%"}}})),zt=function(){var e=Wt();return Object(w.jsx)(Ve,{children:Object(w.jsxs)("div",{className:e.root,children:[Object(w.jsx)(xt,{}),Object(w.jsx)(Ht,{})]})})};n(263).config();var Kt=function(){return Object(w.jsxs)(u.a,{theme:l,children:[Object(w.jsx)(d.a,{}),Object(w.jsx)(i.a,{children:Object(w.jsx)(j.a,{maxWidth:"lg",style:{margin:"auto"},children:Object(w.jsxs)(o.d,{children:[Object(w.jsx)(R,{exact:!0,path:"/",component:Y}),Object(w.jsx)(k,{path:"/home",component:zt})]})})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(w.jsx)(_,{children:Object(w.jsx)(Qe,{children:Object(w.jsx)(ot,{children:Object(w.jsx)(_e,{children:Object(w.jsx)(Kt,{})})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[266,1,2]]]);
//# sourceMappingURL=main.e2773568.chunk.js.map